nohup: ignoring input
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/103818
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/103818/T1w/Diffusion/data.nii.gz found
Trackgen outputs already exist...skipping
Unet segmentation outputs already exist...skipping
-------- NUMBER OF CASES DONE ----------
1
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/data.nii.gz'
sending incremental file list
bvals

sent 1,448 bytes  received 35 bytes  2,966.00 bytes/sec
total size is 1,344  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention
cleaning out existing output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 101 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4852947 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 101 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       16 seeds,       13 streamlines,        1 selected
tckgen: [  0%]       17 seeds,       13 streamlines,        1 selected
tckgen: [  0%]     2021 seeds,     1838 streamlines,      139 selected
tckgen: [  0%]     5951 seeds,     5445 streamlines,      439 selected
tckgen: [  0%]    13731 seeds,    12547 streamlines,      993 selected
tckgen: [  2%]    27187 seeds,    24853 streamlines,     2000 selected
tckgen: [  4%]    54237 seeds,    49513 streamlines,     4000 selected
tckgen: [  8%]   112391 seeds,   102593 streamlines,     8072 selected
tckgen: [ 16%]   226561 seeds,   206716 streamlines,    16292 selected
tckgen: [ 32%]   455901 seeds,   416030 streamlines,    32765 selected
tckgen: [ 65%]   904431 seeds,   825567 streamlines,    65351 selected
tckgen: [100%]  1382506 seeds,  1261952 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        8 seeds,        6 streamlines,        1 selected
tckgen: [  0%]        9 seeds,        6 streamlines,        1 selected
tckgen: [  0%]     2541 seeds,     2041 streamlines,      195 selected
tckgen: [  0%]     7641 seeds,     6245 streamlines,      624 selected
tckgen: [  1%]    15691 seeds,    12881 streamlines,     1295 selected
tckgen: [  2%]    34231 seeds,    28218 streamlines,     2828 selected
tckgen: [  5%]    70151 seeds,    57676 streamlines,     5903 selected
tckgen: [ 11%]   140711 seeds,   115771 streamlines,    11860 selected
tckgen: [ 23%]   280891 seeds,   231196 streamlines,    23518 selected
tckgen: [ 47%]   567164 seeds,   466205 streamlines,    47000 selected
tckgen: [ 93%]  1131701 seeds,   930569 streamlines,    93404 selected
tckgen: [100%]  1211660 seeds,   996268 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      186 seeds,      146 streamlines,        1 selected
tckgen: [  0%]      187 seeds,      147 streamlines,        1 selected
tckgen: [  0%]     3281 seeds,     2702 streamlines,       16 selected
tckgen: [  0%]     9291 seeds,     7657 streamlines,       49 selected
tckgen: [  0%]    21271 seeds,    17505 streamlines,      122 selected
tckgen: [  0%]    45791 seeds,    37587 streamlines,      243 selected
tckgen: [  0%]    94291 seeds,    77521 streamlines,      497 selected
tckgen: [  1%]   189461 seeds,   155734 streamlines,     1005 selected
tckgen: [  2%]   380521 seeds,   312970 streamlines,     2160 selected
tckgen: [  4%]   763161 seeds,   627594 streamlines,     4286 selected
tckgen: [  8%]  1539881 seeds,  1265881 streamlines,     8680 selected
tckgen: [ 17%]  3103961 seeds,  2551537 streamlines,    17599 selected
tckgen: [ 35%]  6234771 seeds,  5124300 streamlines,    35143 selected
tckgen: [ 70%] 12497051 seeds, 10270975 streamlines,    70723 selected
tckgen: [100%] 17664634 seeds, 14518891 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 101 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/temp_losqdbfuja/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 101 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/111312/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f84e3e83170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.67it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
done
total posterior volume:  [159.8441   363.52682  121.833496  98.09454  171.47882   66.199974
  99.178154  43.613075 150.94676  388.5482   117.38856  104.885124
 234.00266   64.27404  103.73242   40.8683  ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
2
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  6,430.67 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 105 48 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4875181 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 105 48 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       35 seeds,       29 streamlines,        1 selected
tckgen: [  0%]       36 seeds,       30 streamlines,        1 selected
tckgen: [  0%]     1701 seeds,     1591 streamlines,      164 selected
tckgen: [  0%]     4921 seeds,     4601 streamlines,      510 selected
tckgen: [  1%]    10054 seeds,     9399 streamlines,     1000 selected
tckgen: [  2%]    21841 seeds,    20434 streamlines,     2137 selected
tckgen: [  4%]    44721 seeds,    41822 streamlines,     4401 selected
tckgen: [  9%]    91638 seeds,    85526 streamlines,     9000 selected
tckgen: [ 18%]   183691 seeds,   171566 streamlines,    18071 selected
tckgen: [ 36%]   369281 seeds,   344804 streamlines,    36339 selected
tckgen: [ 72%]   736901 seeds,   688258 streamlines,    72398 selected
tckgen: [100%]  1018530 seeds,   951497 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        5 seeds,        5 streamlines,        1 selected
tckgen: [  0%]        6 seeds,        6 streamlines,        1 selected
tckgen: [  0%]     1781 seeds,     1559 streamlines,      150 selected
tckgen: [  0%]     5491 seeds,     4770 streamlines,      497 selected
tckgen: [  1%]    11285 seeds,     9859 streamlines,     1000 selected
tckgen: [  2%]    25211 seeds,    22019 streamlines,     2160 selected
tckgen: [  4%]    52731 seeds,    45994 streamlines,     4677 selected
tckgen: [  9%]   106701 seeds,    93086 streamlines,     9426 selected
tckgen: [ 18%]   215951 seeds,   188417 streamlines,    18929 selected
tckgen: [ 38%]   432151 seeds,   377084 streamlines,    38323 selected
tckgen: [ 76%]   872124 seeds,   760791 streamlines,    76725 selected
tckgen: [100%]  1133579 seeds,   988997 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      226 seeds,      194 streamlines,        1 selected
tckgen: [  0%]      227 seeds,      195 streamlines,        1 selected
tckgen: [  0%]     2391 seeds,     2070 streamlines,       22 selected
tckgen: [  0%]     6831 seeds,     5961 streamlines,       64 selected
tckgen: [  0%]    15751 seeds,    13728 streamlines,      145 selected
tckgen: [  0%]    33821 seeds,    29435 streamlines,      305 selected
tckgen: [  0%]    69941 seeds,    60950 streamlines,      618 selected
tckgen: [  1%]   139541 seeds,   121732 streamlines,     1235 selected
tckgen: [  2%]   281591 seeds,   245624 streamlines,     2501 selected
tckgen: [  5%]   562060 seeds,   490432 streamlines,     5000 selected
tckgen: [ 10%]  1130521 seeds,   986436 streamlines,    10078 selected
tckgen: [ 19%]  2267111 seeds,  1979014 streamlines,    19971 selected
tckgen: [ 40%]  4538951 seeds,  3962272 streamlines,    40142 selected
tckgen: [ 81%]  9098771 seeds,  7940690 streamlines,    81017 selected
tckgen: [100%] 11210984 seeds,  9783765 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 105 48 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/temp_btfwqhsanc/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 105 48 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/115320/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f68b842c170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.64it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.64it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.64it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.63it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.64it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.64it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.64it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.64it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.65it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.65it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.63it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.62it/s]Processing:  67%|######6   | 36/54 [00:21<00:11,  1.63it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.63it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.64it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.64it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.64it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.64it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.65it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.65it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.65it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.65it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.64it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
done
total posterior volume:  [201.97514  400.18726  140.12299  123.34954  210.19905   84.58683
 130.42746   50.42406  199.563    434.57434  149.63509  135.35684
 258.6347    74.78945  134.48396   52.503284]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
3
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4825017 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       39 seeds,       31 streamlines,        1 selected
tckgen: [  0%]       40 seeds,       32 streamlines,        1 selected
tckgen: [  0%]     1681 seeds,     1602 streamlines,      156 selected
tckgen: [  0%]     4981 seeds,     4721 streamlines,      481 selected
tckgen: [  1%]    10750 seeds,    10189 streamlines,     1000 selected
tckgen: [  2%]    22621 seeds,    21489 streamlines,     2150 selected
tckgen: [  4%]    46111 seeds,    43816 streamlines,     4399 selected
tckgen: [  9%]    93693 seeds,    89013 streamlines,     9000 selected
tckgen: [ 18%]   187901 seeds,   178529 streamlines,    18081 selected
tckgen: [ 36%]   375361 seeds,   356623 streamlines,    36159 selected
tckgen: [ 72%]   753771 seeds,   716308 streamlines,    72625 selected
tckgen: [100%]  1039161 seeds,   987424 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       22 seeds,       20 streamlines,        1 selected
tckgen: [  0%]       23 seeds,       20 streamlines,        1 selected
tckgen: [  0%]     2231 seeds,     1997 streamlines,      171 selected
tckgen: [  0%]     6731 seeds,     6007 streamlines,      543 selected
tckgen: [  1%]    13851 seeds,    12326 streamlines,     1082 selected
tckgen: [  2%]    30151 seeds,    26935 streamlines,     2355 selected
tckgen: [  4%]    62321 seeds,    55638 streamlines,     4964 selected
tckgen: [ 10%]   124731 seeds,   111223 streamlines,    10086 selected
tckgen: [ 20%]   255001 seeds,   227450 streamlines,    20737 selected
tckgen: [ 41%]   517761 seeds,   461422 streamlines,    41924 selected
tckgen: [ 84%]  1036014 seeds,   923179 streamlines,    84000 selected
tckgen: [100%]  1233147 seeds,  1098929 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      299 seeds,      261 streamlines,        1 selected
tckgen: [  0%]      300 seeds,      262 streamlines,        1 selected
tckgen: [  0%]     3131 seeds,     2776 streamlines,       13 selected
tckgen: [  0%]     8781 seeds,     7798 streamlines,       32 selected
tckgen: [  0%]    20141 seeds,    17927 streamlines,       65 selected
tckgen: [  0%]    43101 seeds,    38382 streamlines,      122 selected
tckgen: [  0%]    88781 seeds,    79064 streamlines,      250 selected
tckgen: [  0%]   180391 seeds,   160619 streamlines,      535 selected
tckgen: [  1%]   362691 seeds,   322746 streamlines,     1067 selected
tckgen: [  2%]   727191 seeds,   647548 streamlines,     2149 selected
tckgen: [  4%]  1458251 seeds,  1299081 streamlines,     4305 selected
tckgen: [  8%]  2930931 seeds,  2612224 streamlines,     8661 selected
tckgen: [ 17%]  5888971 seeds,  5248649 streamlines,    17463 selected
tckgen: [ 35%] 11767411 seeds, 10486965 streamlines,    35226 selected

tckgen: [SYSTEM FATAL CODE: SIGHUP (1)] Disconnection of terminal
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/temp_wqrburekcv/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [=================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/125525/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f6c3c780170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:28<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
done
total posterior volume:  [135.32352  435.45474  185.99467   82.475716 125.19071   68.11476
 112.5245    40.931664 145.83061  425.5695   184.8815   118.20387
 186.0395    74.43855  110.599304  49.082016]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
4
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 89 99 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4963950 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 89 99 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       30 seeds,       30 streamlines,        1 selected
tckgen: [  0%]       31 seeds,       31 streamlines,        2 selected
tckgen: [  0%]     1891 seeds,     1760 streamlines,      210 selected
tckgen: [  0%]     5581 seeds,     5166 streamlines,      631 selected
tckgen: [  1%]    11461 seeds,    10610 streamlines,     1271 selected
tckgen: [  2%]    24751 seeds,    23008 streamlines,     2714 selected
tckgen: [  5%]    50091 seeds,    46627 streamlines,     5383 selected
tckgen: [ 10%]   101501 seeds,    94396 streamlines,    10952 selected
tckgen: [ 21%]   202011 seeds,   187882 streamlines,    21770 selected
tckgen: [ 43%]   403321 seeds,   375148 streamlines,    43599 selected
tckgen: [ 87%]   805071 seeds,   749230 streamlines,    87322 selected
tckgen: [100%]   920643 seeds,   856957 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       42 seeds,       27 streamlines,        1 selected
tckgen: [  0%]       43 seeds,       28 streamlines,        1 selected
tckgen: [  0%]     1191 seeds,      979 streamlines,       80 selected
tckgen: [  0%]     3511 seeds,     2917 streamlines,      263 selected
tckgen: [  0%]     8251 seeds,     6889 streamlines,      633 selected
tckgen: [  1%]    16701 seeds,    13929 streamlines,     1276 selected
tckgen: [  2%]    34411 seeds,    28766 streamlines,     2625 selected
tckgen: [  5%]    68831 seeds,    57665 streamlines,     5268 selected
tckgen: [ 10%]   139991 seeds,   117336 streamlines,    10727 selected
tckgen: [ 21%]   280241 seeds,   235006 streamlines,    21498 selected
tckgen: [ 43%]   562891 seeds,   472049 streamlines,    43164 selected
tckgen: [ 86%]  1127881 seeds,   946277 streamlines,    86768 selected
tckgen: [100%]  1300629 seeds,  1091512 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      378 seeds,      307 streamlines,        1 selected
tckgen: [  0%]      379 seeds,      307 streamlines,        1 selected
tckgen: [  0%]     2951 seeds,     2451 streamlines,        1 selected
tckgen: [  0%]     8051 seeds,     6761 streamlines,        7 selected
tckgen: [  0%]    18281 seeds,    15373 streamlines,       25 selected
tckgen: [  0%]    38661 seeds,    32441 streamlines,       51 selected
tckgen: [  0%]    79121 seeds,    66408 streamlines,      117 selected
tckgen: [  0%]   159851 seeds,   134255 streamlines,      251 selected
tckgen: [  0%]   321291 seeds,   269763 streamlines,      549 selected
tckgen: [  1%]   643331 seeds,   540058 streamlines,     1095 selected
tckgen: [  2%]  1289671 seeds,  1082498 streamlines,     2196 selected
tckgen: [  4%]  2579471 seeds,  2165646 streamlines,     4398 selected
tckgen: [  8%]  5163561 seeds,  4333819 streamlines,     8811 selected
tckgen: [ 17%] 10337201 seeds,  8675636 streamlines,    17726 selected
tckgen: [ 35%] 20666221 seeds, 17344573 streamlines,    35350 selected
tckgen: [ 70%] 41285891 seeds, 34652468 streamlines,    70841 selected
tckgen: [100%] 58204094 seeds, 48851275 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 89 99 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/temp_usyaufvzso/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 89 99 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/135528/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f10f6175170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.72it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.73it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.73it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.72it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.72it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.72it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.72it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.72it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.72it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.72it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.72it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.72it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.72it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.72it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.72it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.72it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.72it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.72it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.72it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.72it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.72it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.72it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
done
total posterior volume:  [161.21799  451.79163  172.78442  119.36172  181.61096   65.29232
 126.42264   41.73987  160.07573  421.71088  165.64177  110.86495
 194.0184    79.196594 129.59404   53.16216 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
5
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 93 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4257352 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 93 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       45 seeds,       39 streamlines,        1 selected
tckgen: [  0%]       46 seeds,       39 streamlines,        1 selected
tckgen: [  0%]     1661 seeds,     1562 streamlines,      160 selected
tckgen: [  0%]     4791 seeds,     4540 streamlines,      443 selected
tckgen: [  0%]    11031 seeds,    10477 streamlines,      992 selected
tckgen: [  2%]    21815 seeds,    20741 streamlines,     2000 selected
tckgen: [  4%]    43441 seeds,    41253 streamlines,     4079 selected
tckgen: [  8%]    88971 seeds,    84553 streamlines,     8353 selected
tckgen: [ 16%]   178911 seeds,   170243 streamlines,    16908 selected
tckgen: [ 33%]   358091 seeds,   340940 streamlines,    33873 selected
tckgen: [ 67%]   714311 seeds,   680318 streamlines,    67694 selected
tckgen: [100%]  1056234 seeds,  1006077 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]        2 seeds,        1 streamlines,        1 selected
tckgen: [  0%]        3 seeds,        2 streamlines,        1 selected
tckgen: [  0%]     1771 seeds,     1670 streamlines,      176 selected
tckgen: [  0%]     5321 seeds,     5014 streamlines,      538 selected
tckgen: [  1%]    11451 seeds,    10785 streamlines,     1199 selected
tckgen: [  2%]    24151 seeds,    22769 streamlines,     2578 selected
tckgen: [  5%]    48491 seeds,    45713 streamlines,     5192 selected
tckgen: [ 10%]    99571 seeds,    93850 streamlines,    10673 selected
tckgen: [ 21%]   200201 seeds,   188688 streamlines,    21456 selected
tckgen: [ 43%]   404171 seeds,   380921 streamlines,    43091 selected
tckgen: [ 86%]   808651 seeds,   762456 streamlines,    86193 selected
tckgen: [100%]   938548 seeds,   884964 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      120 seeds,      109 streamlines,        1 selected
tckgen: [  0%]      121 seeds,      110 streamlines,        1 selected
tckgen: [  0%]     2221 seeds,     2078 streamlines,        7 selected
tckgen: [  0%]     6401 seeds,     6012 streamlines,       21 selected
tckgen: [  0%]    14981 seeds,    14112 streamlines,       51 selected
tckgen: [  0%]    31861 seeds,    30031 streamlines,      121 selected
tckgen: [  0%]    65871 seeds,    62036 streamlines,      254 selected
tckgen: [  0%]   133671 seeds,   125973 streamlines,      577 selected
tckgen: [  1%]   268051 seeds,   252676 streamlines,     1179 selected
tckgen: [  2%]   540031 seeds,   509140 streamlines,     2379 selected
tckgen: [  4%]  1081981 seeds,  1020376 streamlines,     4728 selected
tckgen: [  9%]  2172821 seeds,  2049059 streamlines,     9499 selected
tckgen: [ 19%]  4362271 seeds,  4112538 streamlines,    19126 selected
tckgen: [ 38%]  8736621 seeds,  8236339 streamlines,    38433 selected
tckgen: [ 77%] 17494441 seeds, 16492242 streamlines,    77649 selected
tckgen: [100%] 22409875 seeds, 21127165 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 93 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/temp_ewbdfpxdsn/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 93 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/139839/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f0f7c3ca170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:22<00:09,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.72it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
done
total posterior volume:  [272.70233  596.75793  184.89084  163.95065  275.1239    96.389534
 191.19775   77.31879  235.60857  547.06573  177.19028  155.74713
 330.1913    99.853386 187.66217   79.82839 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
6
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/data.nii.gz'
sending incremental file list
bvals

sent 1,449 bytes  received 35 bytes  2,968.00 bytes/sec
total size is 1,345  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 104 47 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4914129 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 104 47 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       22 seeds,       16 streamlines,        1 selected
tckgen: [  0%]       23 seeds,       17 streamlines,        1 selected
tckgen: [  0%]     2241 seeds,     2018 streamlines,      167 selected
tckgen: [  0%]     6411 seeds,     5753 streamlines,      497 selected
tckgen: [  1%]    13745 seeds,    12300 streamlines,     1000 selected
tckgen: [  2%]    28561 seeds,    25529 streamlines,     2078 selected
tckgen: [  4%]    58341 seeds,    52130 streamlines,     4314 selected
tckgen: [  8%]   120311 seeds,   107421 streamlines,     8794 selected
tckgen: [ 17%]   239991 seeds,   214587 streamlines,    17524 selected
tckgen: [ 34%]   478391 seeds,   427993 streamlines,    34847 selected
tckgen: [ 69%]   947431 seeds,   847425 streamlines,    69074 selected
tckgen: [100%]  1370068 seeds,  1225169 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       28 seeds,       19 streamlines,        1 selected
tckgen: [  0%]       29 seeds,       20 streamlines,        1 selected
tckgen: [  0%]     2431 seeds,     1906 streamlines,      192 selected
tckgen: [  0%]     7481 seeds,     5796 streamlines,      573 selected
tckgen: [  1%]    15021 seeds,    11721 streamlines,     1188 selected
tckgen: [  2%]    33291 seeds,    26074 streamlines,     2598 selected
tckgen: [  5%]    66681 seeds,    52235 streamlines,     5181 selected
tckgen: [ 10%]   138651 seeds,   108792 streamlines,    10570 selected
tckgen: [ 21%]   278901 seeds,   218769 streamlines,    21284 selected
tckgen: [ 43%]   564141 seeds,   442675 streamlines,    43000 selected
tckgen: [ 85%]  1125051 seeds,   882616 streamlines,    85454 selected
tckgen: [100%]  1316361 seeds,  1032877 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      540 seeds,      421 streamlines,        1 selected
tckgen: [  0%]      541 seeds,      422 streamlines,        1 selected
tckgen: [  0%]     3381 seeds,     2669 streamlines,       12 selected
tckgen: [  0%]     8931 seeds,     7054 streamlines,       39 selected
tckgen: [  0%]    20031 seeds,    15816 streamlines,       87 selected
tckgen: [  0%]    42511 seeds,    33419 streamlines,      184 selected
tckgen: [  0%]    87581 seeds,    68785 streamlines,      381 selected
tckgen: [  0%]   177131 seeds,   139129 streamlines,      762 selected
tckgen: [  1%]   353681 seeds,   277630 streamlines,     1477 selected
tckgen: [  2%]   709851 seeds,   557063 streamlines,     2926 selected
tckgen: [  5%]  1422321 seeds,  1116194 streamlines,     5907 selected
tckgen: [ 11%]  2861511 seeds,  2245458 streamlines,    11952 selected
tckgen: [ 24%]  5731211 seeds,  4498099 streamlines,    24008 selected
tckgen: [ 48%] 11461361 seeds,  8995522 streamlines,    48106 selected
tckgen: [ 96%] 22937161 seeds, 18003263 streamlines,    96290 selected
tckgen: [100%] 23814023 seeds, 18691725 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 104 47 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/temp_tsfqocwjgd/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 104 47 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/144226/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f840bddf170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:22<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:25<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
done
total posterior volume:  [153.97754  346.78735  145.21484   97.28237  211.7782    61.482185
 106.995415  36.8156   163.40637  349.0611   134.2358   107.0147
 204.81477   60.629227 111.40974   37.614693]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
7
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 98 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4540514 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 98 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       20 seeds,       19 streamlines,        1 selected
tckgen: [  0%]       21 seeds,       20 streamlines,        1 selected
tckgen: [  0%]     1821 seeds,     1696 streamlines,      155 selected
tckgen: [  0%]     5391 seeds,     5053 streamlines,      452 selected
tckgen: [  1%]    12421 seeds,    11628 streamlines,     1000 selected
tckgen: [  2%]    25195 seeds,    23530 streamlines,     2000 selected
tckgen: [  3%]    51561 seeds,    48053 streamlines,     3998 selected
tckgen: [  8%]   102497 seeds,    95480 streamlines,     8000 selected
tckgen: [ 16%]   205491 seeds,   191412 streamlines,    16054 selected
tckgen: [ 31%]   411771 seeds,   383814 streamlines,    31746 selected
tckgen: [ 62%]   819811 seeds,   764235 streamlines,    62778 selected
tckgen: [100%]  1308127 seeds,  1219498 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       20 seeds,       19 streamlines,        1 selected
tckgen: [  0%]       21 seeds,       20 streamlines,        1 selected
tckgen: [  0%]     2011 seeds,     1806 streamlines,      176 selected
tckgen: [  0%]     6011 seeds,     5436 streamlines,      555 selected
tckgen: [  1%]    12711 seeds,    11496 streamlines,     1146 selected
tckgen: [  2%]    26821 seeds,    24313 streamlines,     2339 selected
tckgen: [  4%]    56581 seeds,    51295 streamlines,     4860 selected
tckgen: [  9%]   114931 seeds,   103954 streamlines,     9946 selected
tckgen: [ 19%]   229801 seeds,   207856 streamlines,    19718 selected
tckgen: [ 39%]   463241 seeds,   418663 streamlines,    39602 selected
tckgen: [ 79%]   921364 seeds,   832949 streamlines,    79000 selected
tckgen: [100%]  1164303 seeds,  1052720 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      798 seeds,      722 streamlines,        1 selected
tckgen: [  0%]      799 seeds,      723 streamlines,        1 selected
tckgen: [  0%]     3021 seeds,     2741 streamlines,       16 selected
tckgen: [  0%]     7471 seeds,     6768 streamlines,       37 selected
tckgen: [  0%]    16541 seeds,    14977 streamlines,       56 selected
tckgen: [  0%]    34731 seeds,    31397 streamlines,      126 selected
tckgen: [  0%]    71311 seeds,    64429 streamlines,      251 selected
tckgen: [  0%]   143471 seeds,   129512 streamlines,      556 selected
tckgen: [  1%]   285891 seeds,   258215 streamlines,     1129 selected
tckgen: [  2%]   574021 seeds,   518583 streamlines,     2265 selected
tckgen: [  4%]  1148461 seeds,  1037765 streamlines,     4533 selected
tckgen: [  9%]  2307651 seeds,  2085450 streamlines,     9159 selected
tckgen: [ 18%]  4624301 seeds,  4180035 streamlines,    18435 selected
tckgen: [ 37%]  9235791 seeds,  8348908 streamlines,    37148 selected
tckgen: [ 74%] 18459881 seeds, 16687959 streamlines,    74035 selected
tckgen: [100%] 24879567 seeds, 22491730 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 98 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/temp_xjttunsaka/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 98 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149337/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fe926719170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.63it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.65it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.65it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.64it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.61it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.62it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.62it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.63it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.65it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [252.3481  425.79074 200.98962 128.72554 227.27899  66.19961 154.63847
  49.80239 275.5277  460.65512 180.34238 135.07794 235.64586  66.42699
 161.62798  54.53195]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
8
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/data.nii.gz'
sending incremental file list
bvals

sent 1,448 bytes  received 35 bytes  2,966.00 bytes/sec
total size is 1,344  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 99 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4417413 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 99 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       55 seeds,       52 streamlines,        1 selected
tckgen: [  0%]       56 seeds,       53 streamlines,        1 selected
tckgen: [  0%]     1671 seeds,     1607 streamlines,      142 selected
tckgen: [  0%]     4921 seeds,     4751 streamlines,      398 selected
tckgen: [  0%]    11381 seeds,    11004 streamlines,      919 selected
tckgen: [  1%]    22651 seeds,    21932 streamlines,     1928 selected
tckgen: [  3%]    45221 seeds,    43817 streamlines,     3813 selected
tckgen: [  7%]    91361 seeds,    88617 streamlines,     7698 selected
tckgen: [ 15%]   184211 seeds,   178809 streamlines,    15255 selected
tckgen: [ 30%]   370281 seeds,   359582 streamlines,    30763 selected
tckgen: [ 61%]   739451 seeds,   718190 streamlines,    61618 selected
tckgen: [100%]  1198915 seeds,  1164419 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       46 seeds,       44 streamlines,        1 selected
tckgen: [  0%]       47 seeds,       45 streamlines,        1 selected
tckgen: [  0%]     1921 seeds,     1886 streamlines,      129 selected
tckgen: [  0%]     5421 seeds,     5320 streamlines,      402 selected
tckgen: [  0%]    12811 seeds,    12597 streamlines,      932 selected
tckgen: [  1%]    26591 seeds,    26152 streamlines,     1998 selected
tckgen: [  3%]    52991 seeds,    52123 streamlines,     3956 selected
tckgen: [  7%]   106271 seeds,   104580 streamlines,     7964 selected
tckgen: [ 16%]   212431 seeds,   209061 streamlines,    16069 selected
tckgen: [ 32%]   425601 seeds,   418782 streamlines,    32285 selected
tckgen: [ 65%]   849431 seeds,   835833 streamlines,    65142 selected
tckgen: [100%]  1307074 seeds,  1286063 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      136 seeds,      133 streamlines,        1 selected
tckgen: [  0%]      137 seeds,      134 streamlines,        1 selected
tckgen: [  0%]     2131 seeds,     2105 streamlines,       17 selected
tckgen: [  0%]     6041 seeds,     5943 streamlines,       56 selected
tckgen: [  0%]    13551 seeds,    13342 streamlines,      151 selected
tckgen: [  0%]    28991 seeds,    28535 streamlines,      320 selected
tckgen: [  0%]    59501 seeds,    58567 streamlines,      666 selected
tckgen: [  1%]   118971 seeds,   117136 streamlines,     1355 selected
tckgen: [  2%]   239541 seeds,   235707 streamlines,     2749 selected
tckgen: [  5%]   481491 seeds,   473657 streamlines,     5485 selected
tckgen: [ 10%]   965171 seeds,   949456 streamlines,    10920 selected
tckgen: [ 21%]  1924921 seeds,  1893729 streamlines,    21877 selected
tckgen: [ 43%]  3850151 seeds,  3787897 streamlines,    43765 selected
tckgen: [ 87%]  7697421 seeds,  7573189 streamlines,    87502 selected
tckgen: [100%]  8779778 seeds,  8637872 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 99 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/temp_nvhrhvyhvn/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 99 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/151526/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7faedda1f170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:28<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.64it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [203.06644  464.92526  175.35994  135.175    197.49066   73.67321
 149.13324   56.84758  222.90358  465.21887  160.6201   136.76273
 302.55353   74.44988  164.57121   58.523643]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
9
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 89 102 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4611828 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 89 102 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       23 seeds,       22 streamlines,        1 selected
tckgen: [  0%]       24 seeds,       22 streamlines,        1 selected
tckgen: [  0%]     1601 seeds,     1505 streamlines,      133 selected
tckgen: [  0%]     4581 seeds,     4336 streamlines,      392 selected
tckgen: [  0%]    10681 seeds,    10111 streamlines,      917 selected
tckgen: [  1%]    21541 seeds,    20411 streamlines,     1817 selected
tckgen: [  3%]    44281 seeds,    41989 streamlines,     3791 selected
tckgen: [  7%]    90371 seeds,    85649 streamlines,     7774 selected
tckgen: [ 15%]   179231 seeds,   169908 streamlines,    15450 selected
tckgen: [ 30%]   355851 seeds,   337323 streamlines,    30453 selected
tckgen: [ 60%]   704311 seeds,   667609 streamlines,    60131 selected
tckgen: [100%]  1173151 seeds,  1111969 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       13 seeds,       12 streamlines,        1 selected
tckgen: [  0%]       14 seeds,       13 streamlines,        1 selected
tckgen: [  0%]     2051 seeds,     1809 streamlines,      157 selected
tckgen: [  0%]     5941 seeds,     5248 streamlines,      477 selected
tckgen: [  1%]    12801 seeds,    11343 streamlines,     1084 selected
tckgen: [  2%]    26761 seeds,    23687 streamlines,     2245 selected
tckgen: [  4%]    56101 seeds,    49482 streamlines,     4676 selected
tckgen: [  9%]   112011 seeds,    98844 streamlines,     9604 selected
tckgen: [ 19%]   228071 seeds,   201110 streamlines,    19406 selected
tckgen: [ 38%]   457861 seeds,   403789 streamlines,    38824 selected
tckgen: [ 77%]   915311 seeds,   807322 streamlines,    77347 selected
tckgen: [100%]  1182477 seeds,  1042863 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      251 seeds,      224 streamlines,        1 selected
tckgen: [  0%]      252 seeds,      225 streamlines,        1 selected
tckgen: [  0%]     2471 seeds,     2190 streamlines,       16 selected
tckgen: [  0%]     6961 seeds,     6143 streamlines,       42 selected
tckgen: [  0%]    15781 seeds,    13880 streamlines,      101 selected
tckgen: [  0%]    33251 seeds,    29242 streamlines,      223 selected
tckgen: [  0%]    68411 seeds,    60197 streamlines,      463 selected
tckgen: [  0%]   138711 seeds,   122216 streamlines,      900 selected
tckgen: [  1%]   278631 seeds,   245416 streamlines,     1765 selected
tckgen: [  3%]   556581 seeds,   490307 streamlines,     3464 selected
tckgen: [  6%]  1117781 seeds,   984900 streamlines,     6936 selected
tckgen: [ 13%]  2242781 seeds,  1977527 streamlines,    13941 selected
tckgen: [ 27%]  4483411 seeds,  3953415 streamlines,    27845 selected
tckgen: [ 55%]  8955131 seeds,  7894438 streamlines,    55542 selected
tckgen: [100%] 16175212 seeds, 14259601 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 89 102 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/temp_kuczbktccv/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 89 102 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/169343/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f76019b7170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.64it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
done
total posterior volume:  [212.8259   444.5029   179.23743  126.55242  210.4408    69.787926
 136.9928    43.14772  185.04434  444.7423   177.6557   125.06354
 194.40393   72.03301  130.70184   44.966743]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
10
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4973707 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       60 seeds,       55 streamlines,        1 selected
tckgen: [  0%]       61 seeds,       56 streamlines,        1 selected
tckgen: [  0%]     1801 seeds,     1695 streamlines,      139 selected
tckgen: [  0%]     5141 seeds,     4834 streamlines,      424 selected
tckgen: [  0%]    11841 seeds,    11123 streamlines,      972 selected
tckgen: [  1%]    23811 seeds,    22406 streamlines,     1957 selected
tckgen: [  3%]    48181 seeds,    45344 streamlines,     3990 selected
tckgen: [  8%]    95540 seeds,    89983 streamlines,     8000 selected
tckgen: [ 16%]   193691 seeds,   182384 streamlines,    16214 selected
tckgen: [ 32%]   387111 seeds,   364572 streamlines,    32673 selected
tckgen: [ 65%]   771271 seeds,   726896 streamlines,    65069 selected
tckgen: [100%]  1184444 seeds,  1116144 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       13 seeds,       12 streamlines,        1 selected
tckgen: [  0%]       14 seeds,       13 streamlines,        1 selected
tckgen: [  0%]     2111 seeds,     1813 streamlines,      137 selected
tckgen: [  0%]     6141 seeds,     5308 streamlines,      436 selected
tckgen: [  1%]    13678 seeds,    11823 streamlines,     1000 selected
tckgen: [  2%]    27889 seeds,    24043 streamlines,     2000 selected
tckgen: [  4%]    58361 seeds,    50355 streamlines,     4218 selected
tckgen: [  8%]   120761 seeds,   104164 streamlines,     8612 selected
tckgen: [ 17%]   240041 seeds,   207241 streamlines,    17305 selected
tckgen: [ 34%]   482071 seeds,   415977 streamlines,    34497 selected
tckgen: [ 69%]   968531 seeds,   835978 streamlines,    69235 selected
tckgen: [100%]  1399669 seeds,  1208045 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      303 seeds,      254 streamlines,        1 selected
tckgen: [  0%]      304 seeds,      255 streamlines,        1 selected
tckgen: [  0%]     2621 seeds,     2262 streamlines,       36 selected
tckgen: [  0%]     7011 seeds,     6071 streamlines,       99 selected
tckgen: [  0%]    16071 seeds,    13882 streamlines,      244 selected
tckgen: [  0%]    34021 seeds,    29362 streamlines,      476 selected
tckgen: [  0%]    70511 seeds,    60892 streamlines,      961 selected
tckgen: [  1%]   141751 seeds,   122257 streamlines,     1918 selected
tckgen: [  3%]   284111 seeds,   245315 streamlines,     3851 selected
tckgen: [  7%]   570951 seeds,   492654 streamlines,     7793 selected
tckgen: [ 15%]  1143711 seeds,   986739 streamlines,    15717 selected
tckgen: [ 31%]  2285111 seeds,  1971215 streamlines,    31354 selected
tckgen: [ 62%]  4562171 seeds,  3935209 streamlines,    62532 selected
tckgen: [100%]  7261786 seeds,  6264915 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/temp_txzthtafii/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/175439/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7ff2a9435170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.61it/s]Processing:   4%|3         | 2/54 [00:01<00:32,  1.62it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.64it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:28<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
done
total posterior volume:  [188.63864  392.02716  145.6193   100.36184  199.05908   78.65137
 130.92426   47.519783 203.76869  404.13834  134.19456  109.18168
 261.27606   68.95358  130.50182   51.03517 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
11
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 100 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4258059 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 100 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       23 seeds,       20 streamlines,        1 selected
tckgen: [  0%]       24 seeds,       21 streamlines,        1 selected
tckgen: [  0%]     1761 seeds,     1646 streamlines,      175 selected
tckgen: [  0%]     5061 seeds,     4741 streamlines,      514 selected
tckgen: [  1%]    10171 seeds,     9573 streamlines,     1096 selected
tckgen: [  2%]    21751 seeds,    20444 streamlines,     2351 selected
tckgen: [  4%]    45211 seeds,    42500 streamlines,     4889 selected
tckgen: [ 10%]    90800 seeds,    85445 streamlines,    10000 selected
tckgen: [ 20%]   182793 seeds,   172068 streamlines,    20000 selected
tckgen: [ 40%]   369221 seeds,   347147 streamlines,    40267 selected
tckgen: [ 80%]   737341 seeds,   693594 streamlines,    80449 selected
tckgen: [100%]   915450 seeds,   861304 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       30 seeds,       27 streamlines,        1 selected
tckgen: [  0%]       31 seeds,       28 streamlines,        1 selected
tckgen: [  0%]     2221 seeds,     2029 streamlines,      129 selected
tckgen: [  0%]     6621 seeds,     6054 streamlines,      384 selected
tckgen: [  0%]    15681 seeds,    14320 streamlines,      933 selected
tckgen: [  1%]    30801 seeds,    28213 streamlines,     1880 selected
tckgen: [  3%]    63061 seeds,    57819 streamlines,     3885 selected
tckgen: [  7%]   127331 seeds,   116650 streamlines,     7904 selected
tckgen: [ 15%]   256561 seeds,   235135 streamlines,    15800 selected
tckgen: [ 31%]   515491 seeds,   472430 streamlines,    31880 selected
tckgen: [ 63%]  1031321 seeds,   945328 streamlines,    63835 selected
tckgen: [100%]  1614743 seeds,  1480045 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]     1228 seeds,     1129 streamlines,        1 selected
tckgen: [  0%]     1229 seeds,     1130 streamlines,        1 selected
tckgen: [  0%]     3731 seeds,     3432 streamlines,        8 selected
tckgen: [  0%]     8551 seeds,     7881 streamlines,       17 selected
tckgen: [  0%]    18461 seeds,    16979 streamlines,       26 selected
tckgen: [  0%]    38221 seeds,    35089 streamlines,       50 selected
tckgen: [  0%]    78111 seeds,    71638 streamlines,      110 selected
tckgen: [  0%]   158071 seeds,   145027 streamlines,      231 selected
tckgen: [  0%]   317271 seeds,   290929 streamlines,      432 selected
tckgen: [  0%]   634531 seeds,   581994 streamlines,      838 selected
tckgen: [  1%]  1266401 seeds,  1160967 streamlines,     1691 selected
tckgen: [  3%]  2534931 seeds,  2322943 streamlines,     3370 selected
tckgen: [  6%]  5080811 seeds,  4655678 streamlines,     6695 selected
tckgen: [ 13%] 10175431 seeds,  9326561 streamlines,    13395 selected
tckgen: [ 27%] 20309421 seeds, 18615509 streamlines,    27141 selected
tckgen: [ 53%] 40557141 seeds, 37174768 streamlines,    53898 selected
tckgen: [100%] 74986719 seeds, 68731919 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 100 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/temp_qwfsctxmxb/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 100 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/185442/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f008a113170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
done
total posterior volume:  [243.77467 572.8612  172.76955 156.0928  315.31747 129.7613  177.32149
  69.19335 244.46075 581.8935  176.66806 162.58449 277.36823 116.07299
 184.6221   77.0516 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
12
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/data.nii.gz'
sending incremental file list
bvals

sent 1,004 bytes  received 35 bytes  2,078.00 bytes/sec
total size is 900  speedup is 0.87
sending incremental file list
bvecs

sent 6,476 bytes  received 35 bytes  13,022.00 bytes/sec
total size is 6,372  speedup is 0.98
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4682031 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       24 seeds,       23 streamlines,        1 selected
tckgen: [  0%]       25 seeds,       24 streamlines,        1 selected
tckgen: [  0%]     1431 seeds,     1376 streamlines,      131 selected
tckgen: [  0%]     4161 seeds,     4009 streamlines,      416 selected
tckgen: [  0%]     9611 seeds,     9266 streamlines,      977 selected
tckgen: [  1%]    19461 seeds,    18745 streamlines,     1964 selected
tckgen: [  3%]    39251 seeds,    37786 streamlines,     3978 selected
tckgen: [  8%]    79640 seeds,    76705 streamlines,     8000 selected
tckgen: [ 16%]   159292 seeds,   153427 streamlines,    16000 selected
tckgen: [ 32%]   319451 seeds,   307714 streamlines,    32215 selected
tckgen: [ 64%]   638901 seeds,   615379 streamlines,    64627 selected
tckgen: [100%]   984783 seeds,   948514 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       54 seeds,       50 streamlines,        1 selected
tckgen: [  0%]       55 seeds,       51 streamlines,        1 selected
tckgen: [  0%]     1881 seeds,     1807 streamlines,      156 selected
tckgen: [  0%]     5261 seeds,     5060 streamlines,      464 selected
tckgen: [  1%]    11320 seeds,    10868 streamlines,     1000 selected
tckgen: [  2%]    23851 seeds,    22909 streamlines,     2070 selected
tckgen: [  4%]    49091 seeds,    47233 streamlines,     4375 selected
tckgen: [  9%]   100182 seeds,    96322 streamlines,     9000 selected
tckgen: [ 18%]   200721 seeds,   193048 streamlines,    18179 selected
tckgen: [ 36%]   408151 seeds,   392636 streamlines,    36623 selected
tckgen: [ 73%]   815851 seeds,   785352 streamlines,    73576 selected
tckgen: [100%]  1108359 seeds,  1066808 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      168 seeds,      159 streamlines,        1 selected
tckgen: [  0%]      169 seeds,      160 streamlines,        1 selected
tckgen: [  0%]     2281 seeds,     2187 streamlines,        9 selected
tckgen: [  0%]     6491 seeds,     6238 streamlines,       27 selected
tckgen: [  0%]    14641 seeds,    14100 streamlines,       62 selected
tckgen: [  0%]    31111 seeds,    29947 streamlines,      137 selected
tckgen: [  0%]    64241 seeds,    61794 streamlines,      292 selected
tckgen: [  0%]   130581 seeds,   125671 streamlines,      587 selected
tckgen: [  1%]   261291 seeds,   251457 streamlines,     1190 selected
tckgen: [  2%]   522681 seeds,   503091 streamlines,     2360 selected
tckgen: [  4%]  1046471 seeds,  1007168 streamlines,     4780 selected
tckgen: [  9%]  2099051 seeds,  2020336 streamlines,     9504 selected
tckgen: [ 18%]  4212801 seeds,  4055097 streamlines,    18872 selected
tckgen: [ 37%]  8430331 seeds,  8114970 streamlines,    37679 selected
tckgen: [ 75%] 16878071 seeds, 16246006 streamlines,    75350 selected
tckgen: [100%] 22380634 seeds, 21543073 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/temp_brxtanwwjq/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/192439/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f2e0bbff170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.64it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.73it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.72it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.73it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.73it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.73it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.73it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.72it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.72it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.72it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.73it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.72it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.72it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.73it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.73it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.74it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.74it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.74it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.74it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.74it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.74it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.74it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.74it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.74it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.74it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.75it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.74it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.75it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.75it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.75it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.75it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.74it/s]Processing:   4%|3         | 2/54 [00:01<00:29,  1.74it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.73it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.73it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
done
total posterior volume:  [182.5389   415.1813   175.37277  116.55796  221.33768   76.315025
 133.37863   47.038734 183.28326  457.76416  173.12462  127.86858
 247.20505   72.34916  138.99863   50.140427]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
13
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 101 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4838062 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 101 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       29 seeds,       27 streamlines,        1 selected
tckgen: [  0%]       30 seeds,       28 streamlines,        1 selected
tckgen: [  0%]     1711 seeds,     1590 streamlines,      149 selected
tckgen: [  0%]     5151 seeds,     4791 streamlines,      438 selected
tckgen: [  1%]    11827 seeds,    11012 streamlines,     1000 selected
tckgen: [  2%]    23454 seeds,    21842 streamlines,     2000 selected
tckgen: [  4%]    47247 seeds,    43966 streamlines,     4000 selected
tckgen: [  8%]    96081 seeds,    89413 streamlines,     8149 selected
tckgen: [ 16%]   194301 seeds,   180894 streamlines,    16439 selected
tckgen: [ 32%]   389281 seeds,   362178 streamlines,    32955 selected
tckgen: [ 65%]   778501 seeds,   724061 streamlines,    65553 selected
tckgen: [100%]  1184757 seeds,  1101914 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]        2 seeds,        1 streamlines,        1 selected
tckgen: [  0%]        3 seeds,        2 streamlines,        1 selected
tckgen: [  0%]     1591 seeds,     1392 streamlines,      138 selected
tckgen: [  0%]     4931 seeds,     4336 streamlines,      437 selected
tckgen: [  1%]    11224 seeds,     9896 streamlines,     1000 selected
tckgen: [  2%]    22290 seeds,    19600 streamlines,     2000 selected
tckgen: [  4%]    46491 seeds,    41053 streamlines,     4138 selected
tckgen: [  8%]    95831 seeds,    84577 streamlines,     8509 selected
tckgen: [ 17%]   192608 seeds,   169999 streamlines,    17000 selected
tckgen: [ 34%]   387161 seeds,   342152 streamlines,    34217 selected
tckgen: [ 68%]   774571 seeds,   684643 streamlines,    68536 selected
tckgen: [100%]  1130624 seeds,   999514 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      291 seeds,      255 streamlines,        1 selected
tckgen: [  0%]      292 seeds,      255 streamlines,        1 selected
tckgen: [  0%]     2251 seeds,     2001 streamlines,        5 selected
tckgen: [  0%]     6041 seeds,     5376 streamlines,       17 selected
tckgen: [  0%]    13561 seeds,    12045 streamlines,       37 selected
tckgen: [  0%]    28581 seeds,    25285 streamlines,       76 selected
tckgen: [  0%]    58211 seeds,    51473 streamlines,      196 selected
tckgen: [  0%]   118011 seeds,   104468 streamlines,      407 selected
tckgen: [  0%]   238791 seeds,   211133 streamlines,      867 selected
tckgen: [  1%]   477561 seeds,   422270 streamlines,     1789 selected
tckgen: [  3%]   955751 seeds,   845349 streamlines,     3631 selected
tckgen: [  7%]  1918701 seeds,  1696103 streamlines,     7376 selected
tckgen: [ 14%]  3855661 seeds,  3406899 streamlines,    14683 selected
tckgen: [ 29%]  7720551 seeds,  6822047 streamlines,    29401 selected
tckgen: [ 58%] 15431991 seeds, 13635551 streamlines,    58988 selected
tckgen: [100%] 26187443 seeds, 23139632 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 101 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/temp_sonjcfuzyg/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 101 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/195041/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f01b0447170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
done
total posterior volume:  [254.90495  412.19504  191.19983  125.57277  230.50967   76.324745
 140.94046   46.27666  228.16928  441.6493   215.24538  141.09213
 263.3574    75.64417  145.98033   57.176388]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
14
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/data.nii.gz'
sending incremental file list
bvals

sent 1,449 bytes  received 35 bytes  2,968.00 bytes/sec
total size is 1,345  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 92 100 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4696554 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 92 100 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       40 seeds,       40 streamlines,        1 selected
tckgen: [  0%]       41 seeds,       41 streamlines,        1 selected
tckgen: [  0%]     1921 seeds,     1813 streamlines,      148 selected
tckgen: [  0%]     5551 seeds,     5268 streamlines,      448 selected
tckgen: [  0%]    12851 seeds,    12220 streamlines,      971 selected
tckgen: [  1%]    26131 seeds,    24851 streamlines,     1954 selected
tckgen: [  3%]    52861 seeds,    50201 streamlines,     3913 selected
tckgen: [  7%]   107261 seeds,   101798 streamlines,     7955 selected
tckgen: [ 16%]   213569 seeds,   202474 streamlines,    16000 selected
tckgen: [ 32%]   427671 seeds,   405426 streamlines,    32147 selected
tckgen: [ 64%]   854179 seeds,   809924 streamlines,    64000 selected
tckgen: [100%]  1339334 seeds,  1270251 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       34 seeds,       26 streamlines,        1 selected
tckgen: [  0%]       35 seeds,       27 streamlines,        1 selected
tckgen: [  0%]     2261 seeds,     1953 streamlines,      196 selected
tckgen: [  0%]     6711 seeds,     5828 streamlines,      557 selected
tckgen: [  1%]    14251 seeds,    12415 streamlines,     1174 selected
tckgen: [  2%]    30471 seeds,    26607 streamlines,     2540 selected
tckgen: [  5%]    61741 seeds,    53940 streamlines,     5295 selected
tckgen: [ 10%]   126371 seeds,   110461 streamlines,    10774 selected
tckgen: [ 21%]   253641 seeds,   221704 streamlines,    21579 selected
tckgen: [ 43%]   507609 seeds,   443412 streamlines,    43001 selected
tckgen: [ 86%]  1013571 seeds,   885838 streamlines,    86091 selected
tckgen: [100%]  1178068 seeds,  1029566 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      222 seeds,      193 streamlines,        1 selected
tckgen: [  0%]      223 seeds,      193 streamlines,        1 selected
tckgen: [  0%]     2951 seeds,     2590 streamlines,       18 selected
tckgen: [  0%]     8311 seeds,     7270 streamlines,       62 selected
tckgen: [  0%]    19241 seeds,    16796 streamlines,      165 selected
tckgen: [  0%]    41011 seeds,    35767 streamlines,      342 selected
tckgen: [  0%]    84581 seeds,    73851 streamlines,      660 selected
tckgen: [  1%]   169121 seeds,   147559 streamlines,     1296 selected
tckgen: [  2%]   341951 seeds,   298440 streamlines,     2503 selected
tckgen: [  4%]   687311 seeds,   599956 streamlines,     4986 selected
tckgen: [ 10%]  1379671 seeds,  1204918 streamlines,    10040 selected
tckgen: [ 20%]  2762470 seeds,  2412984 streamlines,    20000 selected
tckgen: [ 39%]  5519661 seeds,  4822102 streamlines,    39819 selected
tckgen: [ 79%] 11022521 seeds,  9629885 streamlines,    79545 selected
tckgen: [100%] 13854474 seeds, 12104496 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 92 100 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/temp_duzahevzli/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 92 100 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200614/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fc0c3fdf170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.63it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.63it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.63it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
done
total posterior volume:  [186.1328   417.71967  140.3513   127.37283  202.33258   87.915634
 129.87303   48.99926  183.19888  401.9028   141.28639  133.67297
 234.70538   79.13968  136.06544   49.748547]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
15
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 99 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4780721 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 99 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       26 seeds,       23 streamlines,        1 selected
tckgen: [  0%]       27 seeds,       24 streamlines,        1 selected
tckgen: [  0%]     1951 seeds,     1817 streamlines,      179 selected
tckgen: [  0%]     5661 seeds,     5263 streamlines,      544 selected
tckgen: [  1%]    11291 seeds,    10545 streamlines,     1076 selected
tckgen: [  2%]    24381 seeds,    22771 streamlines,     2346 selected
tckgen: [  4%]    51451 seeds,    47980 streamlines,     4958 selected
tckgen: [  9%]   105311 seeds,    97995 streamlines,     9949 selected
tckgen: [ 20%]   212851 seeds,   198152 streamlines,    20276 selected
tckgen: [ 40%]   424541 seeds,   395379 streamlines,    40428 selected
tckgen: [ 80%]   847641 seeds,   789259 streamlines,    80243 selected
tckgen: [100%]  1057165 seeds,   984318 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       24 seeds,       18 streamlines,        1 selected
tckgen: [  0%]       25 seeds,       19 streamlines,        1 selected
tckgen: [  0%]     1181 seeds,     1025 streamlines,      150 selected
tckgen: [  0%]     3631 seeds,     3130 streamlines,      424 selected
tckgen: [  0%]     8671 seeds,     7444 streamlines,      995 selected
tckgen: [  1%]    17451 seeds,    14949 streamlines,     1980 selected
tckgen: [  3%]    34931 seeds,    29976 streamlines,     3987 selected
tckgen: [  8%]    70538 seeds,    60480 streamlines,     8000 selected
tckgen: [ 16%]   142673 seeds,   122369 streamlines,    16000 selected
tckgen: [ 32%]   286221 seeds,   245594 streamlines,    32229 selected
tckgen: [ 64%]   576521 seeds,   495211 streamlines,    64885 selected
tckgen: [100%]   889379 seeds,   764108 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]      166 seeds,      130 streamlines,        1 selected
tckgen: [  0%]      167 seeds,      131 streamlines,        1 selected
tckgen: [  0%]     3221 seeds,     2754 streamlines,       12 selected
tckgen: [  0%]     9241 seeds,     7896 streamlines,       39 selected
tckgen: [  0%]    21501 seeds,    18437 streamlines,       98 selected
tckgen: [  0%]    45831 seeds,    39298 streamlines,      192 selected
tckgen: [  0%]    94531 seeds,    81206 streamlines,      401 selected
tckgen: [  0%]   191491 seeds,   164516 streamlines,      843 selected
tckgen: [  1%]   383411 seeds,   329487 streamlines,     1684 selected
tckgen: [  3%]   766351 seeds,   658862 streamlines,     3447 selected
tckgen: [  6%]  1540621 seeds,  1324664 streamlines,     6958 selected
tckgen: [ 14%]  3087021 seeds,  2653476 streamlines,    14032 selected
tckgen: [ 27%]  6186681 seeds,  5316266 streamlines,    27988 selected
tckgen: [ 55%] 12383551 seeds, 10639000 streamlines,    55582 selected
tckgen: [100%] 22225855 seeds, 19096261 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 99 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/temp_zramvolwkc/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 99 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/250427/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7ff1216a9170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.72it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.72it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.72it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.72it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.72it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.72it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.72it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.73it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.72it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.72it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.72it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:16<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.73it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.73it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.72it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.72it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.72it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.73it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.72it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.72it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.72it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.72it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.72it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.72it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.72it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.72it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.72it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.72it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.72it/s]Processing:  65%|######4   | 35/54 [00:20<00:10,  1.73it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.73it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.72it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.72it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.72it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.73it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.73it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.73it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.73it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.72it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.73it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.73it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.73it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]
done
total posterior volume:  [184.38594  443.3995   145.83635  112.90848  201.55318   79.30987
 127.96036   47.198364 193.02199  406.72162  153.08765  123.2961
 249.74014   79.04311  135.80495   45.52147 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
16
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/data.nii.gz'
sending incremental file list
bvals

sent 1,448 bytes  received 35 bytes  2,966.00 bytes/sec
total size is 1,344  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 92 41 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4237293 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 92 41 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       40 seeds,       38 streamlines,        1 selected
tckgen: [  0%]       41 seeds,       39 streamlines,        1 selected
tckgen: [  0%]     1791 seeds,     1712 streamlines,      175 selected
tckgen: [  0%]     5091 seeds,     4867 streamlines,      515 selected
tckgen: [  1%]    10851 seeds,    10410 streamlines,     1085 selected
tckgen: [  2%]    22951 seeds,    22032 streamlines,     2286 selected
tckgen: [  4%]    46421 seeds,    44522 streamlines,     4676 selected
tckgen: [  9%]    92661 seeds,    88988 streamlines,     9333 selected
tckgen: [ 18%]   187261 seeds,   179802 streamlines,    18700 selected
tckgen: [ 37%]   373131 seeds,   358225 streamlines,    37245 selected
tckgen: [ 74%]   744596 seeds,   715094 streamlines,    74006 selected
tckgen: [100%]  1005510 seeds,   965596 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       20 seeds,       19 streamlines,        1 selected
tckgen: [  0%]       21 seeds,       20 streamlines,        1 selected
tckgen: [  0%]     2121 seeds,     2035 streamlines,      159 selected
tckgen: [  0%]     6171 seeds,     5918 streamlines,      445 selected
tckgen: [  1%]    13488 seeds,    12957 streamlines,     1000 selected
tckgen: [  2%]    27031 seeds,    25967 streamlines,     2077 selected
tckgen: [  4%]    56041 seeds,    53781 streamlines,     4294 selected
tckgen: [  8%]   115231 seeds,   110728 streamlines,     8756 selected
tckgen: [ 17%]   232391 seeds,   223389 streamlines,    17800 selected
tckgen: [ 36%]   467899 seeds,   449804 streamlines,    36000 selected
tckgen: [ 72%]   936112 seeds,   900321 streamlines,    72001 selected
tckgen: [100%]  1296953 seeds,  1247350 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      518 seeds,      493 streamlines,        1 selected
tckgen: [  0%]      519 seeds,      494 streamlines,        1 selected
tckgen: [  0%]     2881 seeds,     2784 streamlines,        4 selected
tckgen: [  0%]     7431 seeds,     7167 streamlines,       22 selected
tckgen: [  0%]    16741 seeds,    16110 streamlines,       53 selected
tckgen: [  0%]    35681 seeds,    34315 streamlines,      115 selected
tckgen: [  0%]    73461 seeds,    70649 streamlines,      222 selected
tckgen: [  0%]   148911 seeds,   143232 streamlines,      440 selected
tckgen: [  0%]   299551 seeds,   288105 streamlines,      906 selected
tckgen: [  1%]   598581 seeds,   575620 streamlines,     1886 selected
tckgen: [  3%]  1198591 seeds,  1152801 streamlines,     3783 selected
tckgen: [  7%]  2403701 seeds,  2312081 streamlines,     7713 selected
tckgen: [ 15%]  4819021 seeds,  4635154 streamlines,    15334 selected
tckgen: [ 30%]  9639011 seeds,  9270625 streamlines,    30899 selected
tckgen: [ 61%] 19282711 seeds, 18545613 streamlines,    61652 selected
tckgen: [100%] 31373418 seeds, 30174451 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 92 41 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/temp_jyvwoxhlaj/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 92 41 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/341834/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f89e59f6170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.63it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.63it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.63it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.63it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.63it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.63it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.64it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.64it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.64it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.64it/s]Processing:  24%|##4       | 13/54 [00:07<00:25,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:22,  1.63it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.63it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.63it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.63it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.63it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.64it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.64it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.64it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.64it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.64it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.63it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.63it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.63it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.63it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.64it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.63it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.64it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.64it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.64it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.63it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.63it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.65it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.59it/s]Processing:  50%|#####     | 27/54 [00:16<00:17,  1.56it/s]Processing:  52%|#####1    | 28/54 [00:16<00:16,  1.59it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.62it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.63it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.61it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.61it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.63it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.63it/s]Processing:  17%|#6        | 9/54 [00:05<00:28,  1.57it/s]Processing:  19%|#8        | 10/54 [00:06<00:27,  1.59it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.60it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.62it/s]Processing:  24%|##4       | 13/54 [00:08<00:25,  1.63it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:11<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.61it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.63it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.64it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.64it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.65it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.62it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.61it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.62it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.63it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
done
total posterior volume:  [250.82799 544.8338  184.01572 157.5262  281.964    94.57477 189.22914
  64.96856 236.47537 569.81433 181.93924 150.67657 272.41125  99.47115
 190.34293  72.56264]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
17
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  988.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4836802 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       96 seeds,       89 streamlines,        1 selected
tckgen: [  0%]       97 seeds,       90 streamlines,        1 selected
tckgen: [  0%]     1831 seeds,     1741 streamlines,      155 selected
tckgen: [  0%]     5071 seeds,     4827 streamlines,      446 selected
tckgen: [  0%]    11501 seeds,    10956 streamlines,      997 selected
tckgen: [  1%]    22961 seeds,    21817 streamlines,     1966 selected
tckgen: [  3%]    46031 seeds,    43834 streamlines,     3977 selected
tckgen: [  8%]    93070 seeds,    88536 streamlines,     8000 selected
tckgen: [ 16%]   188061 seeds,   178880 streamlines,    16195 selected
tckgen: [ 32%]   375981 seeds,   357527 streamlines,    32470 selected
tckgen: [ 64%]   752921 seeds,   715870 streamlines,    64679 selected
tckgen: [100%]  1162207 seeds,  1104492 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       54 seeds,       45 streamlines,        1 selected
tckgen: [  0%]       55 seeds,       46 streamlines,        1 selected
tckgen: [  0%]     1941 seeds,     1658 streamlines,      191 selected
tckgen: [  0%]     5501 seeds,     4825 streamlines,      607 selected
tckgen: [  1%]    11151 seeds,     9775 streamlines,     1188 selected
tckgen: [  2%]    24871 seeds,    21720 streamlines,     2552 selected
tckgen: [  5%]    49771 seeds,    43559 streamlines,     5190 selected
tckgen: [ 10%]   103431 seeds,    90538 streamlines,    10763 selected
tckgen: [ 21%]   209141 seeds,   183268 streamlines,    21861 selected
tckgen: [ 44%]   420046 seeds,   367743 streamlines,    44000 selected
tckgen: [ 87%]   841471 seeds,   736500 streamlines,    87962 selected
tckgen: [100%]   954453 seeds,   835203 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]     1101 seeds,      953 streamlines,        0 selected
tckgen: [  0%]     1362 seeds,     1183 streamlines,        1 selected
tckgen: [  0%]     1363 seeds,     1184 streamlines,        1 selected
tckgen: [  0%]     3501 seeds,     3071 streamlines,       11 selected
tckgen: [  0%]     7861 seeds,     6899 streamlines,       28 selected
tckgen: [  0%]    16781 seeds,    14704 streamlines,       70 selected
tckgen: [  0%]    34461 seeds,    30151 streamlines,      159 selected
tckgen: [  0%]    69801 seeds,    61052 streamlines,      315 selected
tckgen: [  0%]   140551 seeds,   122967 streamlines,      660 selected
tckgen: [  1%]   280261 seeds,   245220 streamlines,     1365 selected
tckgen: [  2%]   559331 seeds,   489947 streamlines,     2712 selected
tckgen: [  5%]  1117911 seeds,   978696 streamlines,     5429 selected
tckgen: [ 10%]  2248891 seeds,  1968429 streamlines,    10896 selected
tckgen: [ 21%]  4499561 seeds,  3938785 streamlines,    21725 selected
tckgen: [ 43%]  9013281 seeds,  7890333 streamlines,    43887 selected
tckgen: [ 87%] 18049011 seeds, 15802213 streamlines,    87276 selected
tckgen: [100%] 20699913 seeds, 18124584 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/temp_dvqvzavvzi/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/562345/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f3aebd63170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.67it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.63it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:24<00:08,  1.62it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.62it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.62it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.62it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.63it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.63it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.62it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.63it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
done
total posterior volume:  [196.84706 364.21515 178.26973 115.59295 215.6305   69.35775 128.60329
  36.78536 204.58673 418.83435 169.72551 140.98131 202.89001  72.81053
 129.30602  41.32239]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
18
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/data.nii.gz'
sending incremental file list
bvals

sent 992 bytes  received 35 bytes  684.67 bytes/sec
total size is 888  speedup is 0.86
sending incremental file list
bvecs

sent 6,410 bytes  received 35 bytes  12,890.00 bytes/sec
total size is 6,306  speedup is 0.98
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 99 41 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4203876 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 99 41 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       31 seeds,       29 streamlines,        1 selected
tckgen: [  0%]       32 seeds,       30 streamlines,        1 selected
tckgen: [  0%]     1961 seeds,     1843 streamlines,      142 selected
tckgen: [  0%]     5611 seeds,     5296 streamlines,      471 selected
tckgen: [  1%]    11741 seeds,    11071 streamlines,     1000 selected
tckgen: [  2%]    25571 seeds,    24116 streamlines,     2162 selected
tckgen: [  4%]    52121 seeds,    49186 streamlines,     4467 selected
tckgen: [  8%]   105291 seeds,    99404 streamlines,     8955 selected
tckgen: [ 18%]   210785 seeds,   198947 streamlines,    18000 selected
tckgen: [ 36%]   424911 seeds,   400908 streamlines,    36468 selected
tckgen: [ 72%]   847641 seeds,   799612 streamlines,    72927 selected
tckgen: [100%]  1157659 seeds,  1092119 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       51 seeds,       45 streamlines,        1 selected
tckgen: [  0%]       52 seeds,       46 streamlines,        1 selected
tckgen: [  0%]     2131 seeds,     2020 streamlines,       90 selected
tckgen: [  0%]     6391 seeds,     6068 streamlines,      259 selected
tckgen: [  0%]    14831 seeds,    14074 streamlines,      649 selected
tckgen: [  1%]    29661 seeds,    28120 streamlines,     1316 selected
tckgen: [  2%]    61881 seeds,    58614 streamlines,     2696 selected
tckgen: [  5%]   124801 seeds,   118343 streamlines,     5547 selected
tckgen: [ 11%]   252081 seeds,   238780 streamlines,    11246 selected
tckgen: [ 22%]   507081 seeds,   480557 streamlines,    22829 selected
tckgen: [ 45%]  1016351 seeds,   963171 streamlines,    45620 selected
tckgen: [ 92%]  2040091 seeds,  1933230 streamlines,    92208 selected
tckgen: [100%]  2210547 seeds,  2094732 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      619 seeds,      592 streamlines,        1 selected
tckgen: [  0%]      620 seeds,      593 streamlines,        1 selected
tckgen: [  0%]     3071 seeds,     2921 streamlines,        5 selected
tckgen: [  0%]     7891 seeds,     7469 streamlines,       17 selected
tckgen: [  0%]    17291 seeds,    16357 streamlines,       41 selected
tckgen: [  0%]    36251 seeds,    34288 streamlines,       90 selected
tckgen: [  0%]    74401 seeds,    70410 streamlines,      196 selected
tckgen: [  0%]   150171 seeds,   142318 streamlines,      417 selected
tckgen: [  0%]   301351 seeds,   285605 streamlines,      861 selected
tckgen: [  1%]   601771 seeds,   570254 streamlines,     1788 selected
tckgen: [  3%]  1203751 seeds,  1140886 streamlines,     3583 selected
tckgen: [  7%]  2409311 seeds,  2283343 streamlines,     7116 selected
tckgen: [ 14%]  4826431 seeds,  4574142 streamlines,    14101 selected
tckgen: [ 28%]  9654511 seeds,  9149300 streamlines,    28331 selected
tckgen: [ 56%] 19306271 seeds, 18296314 streamlines,    56244 selected
tckgen: [100%] 34268886 seeds, 32479004 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 99 41 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/temp_zqaxpanoww/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 99 41 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/601127/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7ff9690f7170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.64it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:29,  1.62it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.62it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.63it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.64it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.63it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.64it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.64it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.63it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.63it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.63it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.62it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.63it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
done
total posterior volume:  [266.1816   543.66315  157.29884  162.62592  257.75745  116.467064
 173.89911   74.778404 254.65776  539.8022   170.71817  153.72913
 324.80594  109.04562  161.87187   67.98634 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
19
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/data.nii.gz'
sending incremental file list
bvals

sent 1,448 bytes  received 35 bytes  2,966.00 bytes/sec
total size is 1,344  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 101 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4516694 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 101 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       62 seeds,       57 streamlines,        1 selected
tckgen: [  0%]       63 seeds,       57 streamlines,        1 selected
tckgen: [  0%]     2011 seeds,     1918 streamlines,      141 selected
tckgen: [  0%]     5741 seeds,     5494 streamlines,      424 selected
tckgen: [  1%]    12956 seeds,    12369 streamlines,     1000 selected
tckgen: [  2%]    25501 seeds,    24337 streamlines,     2087 selected
tckgen: [  4%]    52501 seeds,    50062 streamlines,     4284 selected
tckgen: [  8%]   106781 seeds,   101809 streamlines,     8836 selected
tckgen: [ 17%]   212281 seeds,   202480 streamlines,    17481 selected
tckgen: [ 35%]   425181 seeds,   405618 streamlines,    35274 selected
tckgen: [ 70%]   850691 seeds,   811562 streamlines,    70311 selected
tckgen: [100%]  1205765 seeds,  1150390 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        5 seeds,        5 streamlines,        1 selected
tckgen: [  0%]        6 seeds,        6 streamlines,        1 selected
tckgen: [  0%]      821 seeds,      765 streamlines,       69 selected
tckgen: [  0%]     2441 seeds,     2297 streamlines,      257 selected
tckgen: [  0%]     5751 seeds,     5379 streamlines,      544 selected
tckgen: [  1%]    11681 seeds,    10945 streamlines,     1080 selected
tckgen: [  2%]    24221 seeds,    22728 streamlines,     2235 selected
tckgen: [  4%]    49051 seeds,    46078 streamlines,     4569 selected
tckgen: [  9%]    98351 seeds,    92455 streamlines,     9273 selected
tckgen: [ 18%]   197731 seeds,   185864 streamlines,    18639 selected
tckgen: [ 37%]   394091 seeds,   370445 streamlines,    37073 selected
tckgen: [ 74%]   787091 seeds,   739790 streamlines,    74000 selected
tckgen: [100%]  1064465 seeds,  1000415 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      506 seeds,      478 streamlines,        1 selected
tckgen: [  0%]      507 seeds,      479 streamlines,        1 selected
tckgen: [  0%]     2291 seeds,     2154 streamlines,        7 selected
tckgen: [  0%]     5901 seeds,     5566 streamlines,       31 selected
tckgen: [  0%]    13161 seeds,    12364 streamlines,       59 selected
tckgen: [  0%]    27391 seeds,    25780 streamlines,      132 selected
tckgen: [  0%]    56191 seeds,    52851 streamlines,      241 selected
tckgen: [  0%]   113531 seeds,   106671 streamlines,      541 selected
tckgen: [  1%]   226491 seeds,   213115 streamlines,     1133 selected
tckgen: [  2%]   454511 seeds,   427567 streamlines,     2233 selected
tckgen: [  4%]   913241 seeds,   858807 streamlines,     4459 selected
tckgen: [  8%]  1836561 seeds,  1727151 streamlines,     8971 selected
tckgen: [ 18%]  3675471 seeds,  3456082 streamlines,    18025 selected
tckgen: [ 36%]  7353901 seeds,  6914290 streamlines,    36339 selected
tckgen: [ 72%] 14701921 seeds, 13822314 streamlines,    72766 selected
tckgen: [100%] 20250803 seeds, 19039802 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 101 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/temp_pgbreynxxa/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 101 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/660951/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f2eb296b170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:34,  1.55it/s]Processing:   4%|3         | 2/54 [00:01<00:33,  1.56it/s]Processing:   6%|5         | 3/54 [00:01<00:32,  1.57it/s]Processing:   7%|7         | 4/54 [00:02<00:32,  1.53it/s]Processing:   9%|9         | 5/54 [00:03<00:31,  1.53it/s]Processing:  11%|#1        | 6/54 [00:03<00:30,  1.55it/s]Processing:  13%|#2        | 7/54 [00:04<00:30,  1.56it/s]Processing:  15%|#4        | 8/54 [00:05<00:29,  1.57it/s]Processing:  17%|#6        | 9/54 [00:05<00:28,  1.58it/s]Processing:  19%|#8        | 10/54 [00:06<00:27,  1.57it/s]Processing:  20%|##        | 11/54 [00:07<00:27,  1.57it/s]Processing:  22%|##2       | 12/54 [00:07<00:26,  1.58it/s]Processing:  24%|##4       | 13/54 [00:08<00:25,  1.59it/s]Processing:  26%|##5       | 14/54 [00:08<00:25,  1.58it/s]Processing:  28%|##7       | 15/54 [00:09<00:24,  1.60it/s]Processing:  30%|##9       | 16/54 [00:10<00:23,  1.60it/s]Processing:  31%|###1      | 17/54 [00:10<00:23,  1.60it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.59it/s]Processing:  35%|###5      | 19/54 [00:12<00:21,  1.60it/s]Processing:  37%|###7      | 20/54 [00:12<00:21,  1.61it/s]Processing:  39%|###8      | 21/54 [00:13<00:20,  1.61it/s]Processing:  41%|####      | 22/54 [00:13<00:20,  1.58it/s]Processing:  43%|####2     | 23/54 [00:14<00:19,  1.59it/s]Processing:  44%|####4     | 24/54 [00:15<00:18,  1.61it/s]Processing:  46%|####6     | 25/54 [00:15<00:18,  1.60it/s]Processing:  48%|####8     | 26/54 [00:16<00:17,  1.59it/s]Processing:  50%|#####     | 27/54 [00:17<00:16,  1.60it/s]Processing:  52%|#####1    | 28/54 [00:17<00:16,  1.62it/s]Processing:  54%|#####3    | 29/54 [00:18<00:15,  1.62it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:19<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:20<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:21<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:22<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:23<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:24<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:26<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:27<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:29<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:30<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:32<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.62it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.64it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.65it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.63it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.63it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.63it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.63it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.59it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.62it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.61it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.60it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.63it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.64it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.63it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.62it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [195.96829  433.55023  171.82051  139.57437  225.92047   86.39016
 150.20032   51.478977 199.35828  407.98883  168.89354  149.33723
 226.0401    78.89214  154.26666   54.73259 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
20
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  6,430.67 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 92 95 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4433770 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 92 95 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       11 seeds,       11 streamlines,        1 selected
tckgen: [  0%]       12 seeds,       12 streamlines,        1 selected
tckgen: [  0%]     1621 seeds,     1555 streamlines,      202 selected
tckgen: [  0%]     4821 seeds,     4630 streamlines,      578 selected
tckgen: [  1%]     9821 seeds,     9425 streamlines,     1184 selected
tckgen: [  2%]    21361 seeds,    20577 streamlines,     2549 selected
tckgen: [  5%]    42831 seeds,    41289 streamlines,     5188 selected
tckgen: [ 10%]    88171 seeds,    85051 streamlines,    10564 selected
tckgen: [ 21%]   178541 seeds,   172406 streamlines,    21564 selected
tckgen: [ 43%]   356341 seeds,   344179 streamlines,    43103 selected
tckgen: [ 86%]   712766 seeds,   688492 streamlines,    86000 selected
tckgen: [100%]   828245 seeds,   799982 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       22 seeds,       22 streamlines,        1 selected
tckgen: [  0%]       23 seeds,       23 streamlines,        1 selected
tckgen: [  0%]     1941 seeds,     1911 streamlines,      135 selected
tckgen: [  0%]     5761 seeds,     5640 streamlines,      382 selected
tckgen: [  0%]    13551 seeds,    13268 streamlines,      922 selected
tckgen: [  1%]    27091 seeds,    26522 streamlines,     1790 selected
tckgen: [  3%]    54421 seeds,    53297 streamlines,     3637 selected
tckgen: [  7%]   111271 seeds,   108947 streamlines,     7480 selected
tckgen: [ 14%]   225561 seeds,   220935 streamlines,    14978 selected
tckgen: [ 29%]   451981 seeds,   442585 streamlines,    29647 selected
tckgen: [ 59%]   904921 seeds,   885973 streamlines,    59177 selected
tckgen: [100%]  1530138 seeds,  1498077 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      429 seeds,      424 streamlines,        1 selected
tckgen: [  0%]      430 seeds,      425 streamlines,        1 selected
tckgen: [  0%]     2571 seeds,     2519 streamlines,       11 selected
tckgen: [  0%]     7061 seeds,     6928 streamlines,       26 selected
tckgen: [  0%]    15721 seeds,    15390 streamlines,       55 selected
tckgen: [  0%]    33461 seeds,    32738 streamlines,      132 selected
tckgen: [  0%]    68791 seeds,    67315 streamlines,      246 selected
tckgen: [  0%]   139571 seeds,   136621 streamlines,      543 selected
tckgen: [  1%]   278701 seeds,   272842 streamlines,     1080 selected
tckgen: [  2%]   558801 seeds,   547200 streamlines,     2184 selected
tckgen: [  4%]  1118551 seeds,  1095303 streamlines,     4437 selected
tckgen: [  8%]  2253091 seeds,  2206338 streamlines,     8800 selected
tckgen: [ 17%]  4511321 seeds,  4416985 streamlines,    17542 selected
tckgen: [ 35%]  9023991 seeds,  8835297 streamlines,    35026 selected
tckgen: [ 70%] 18059391 seeds, 17681318 streamlines,    70336 selected
tckgen: [100%] 25659462 seeds, 25122319 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 92 95 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/temp_ewkhoabqlj/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 92 95 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/783462/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fa6cf457170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.72it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.72it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.72it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.72it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.72it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:09<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.72it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.72it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.72it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.72it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.72it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
done
total posterior volume:  [241.79663  507.35327  179.17155  116.51118  253.2516    82.212456
 145.86739   48.673496 249.32028  566.2809   155.35593  126.78921
 246.84406   88.17024  143.53082   54.979908]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
21
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/data.nii.gz'
sending incremental file list
bvals

sent 1,449 bytes  received 35 bytes  2,968.00 bytes/sec
total size is 1,345  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 99 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4689831 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 99 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        9 seeds,        9 streamlines,        1 selected
tckgen: [  0%]       10 seeds,       10 streamlines,        1 selected
tckgen: [  0%]     1741 seeds,     1646 streamlines,      165 selected
tckgen: [  0%]     5291 seeds,     5016 streamlines,      551 selected
tckgen: [  1%]    11241 seeds,    10657 streamlines,     1204 selected
tckgen: [  2%]    24131 seeds,    22892 streamlines,     2548 selected
tckgen: [  5%]    48083 seeds,    45631 streamlines,     5000 selected
tckgen: [ 10%]    98041 seeds,    93028 streamlines,    10168 selected
tckgen: [ 20%]   196321 seeds,   186241 streamlines,    20089 selected
tckgen: [ 40%]   393671 seeds,   373486 streamlines,    40282 selected
tckgen: [ 80%]   788231 seeds,   747557 streamlines,    80329 selected
tckgen: [100%]   980574 seeds,   929770 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       31 seeds,       24 streamlines,        1 selected
tckgen: [  0%]       32 seeds,       25 streamlines,        1 selected
tckgen: [  0%]     1871 seeds,     1649 streamlines,      227 selected
tckgen: [  0%]     5551 seeds,     4902 streamlines,      675 selected
tckgen: [  1%]    11441 seeds,    10123 streamlines,     1319 selected
tckgen: [  2%]    24741 seeds,    21815 streamlines,     2812 selected
tckgen: [  5%]    51591 seeds,    45306 streamlines,     5697 selected
tckgen: [ 11%]   105111 seeds,    92330 streamlines,    11412 selected
tckgen: [ 23%]   212511 seeds,   186564 streamlines,    23000 selected
tckgen: [ 46%]   425022 seeds,   373439 streamlines,    46000 selected
tckgen: [ 92%]   852011 seeds,   748510 streamlines,    92093 selected
tckgen: [100%]   924579 seeds,   812218 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]      221 seeds,      188 streamlines,        1 selected
tckgen: [  0%]      222 seeds,      189 streamlines,        1 selected
tckgen: [  0%]     2581 seeds,     2265 streamlines,        6 selected
tckgen: [  0%]     7171 seeds,     6271 streamlines,       21 selected
tckgen: [  0%]    16181 seeds,    14160 streamlines,       43 selected
tckgen: [  0%]    34311 seeds,    30142 streamlines,       81 selected
tckgen: [  0%]    71181 seeds,    62540 streamlines,      172 selected
tckgen: [  0%]   144461 seeds,   126967 streamlines,      387 selected
tckgen: [  0%]   290771 seeds,   255407 streamlines,      764 selected
tckgen: [  1%]   582021 seeds,   511145 streamlines,     1544 selected
tckgen: [  3%]  1165851 seeds,  1023784 streamlines,     3156 selected
tckgen: [  6%]  2333191 seeds,  2049336 streamlines,     6238 selected
tckgen: [ 12%]  4676403 seeds,  4106415 streamlines,    12494 selected
tckgen: [ 25%]  9344611 seeds,  8204732 streamlines,    25061 selected
tckgen: [ 49%] 18642871 seeds, 16367702 streamlines,    49903 selected
tckgen: [ 99%] 37239021 seeds, 32694640 streamlines,    99614 selected
tckgen: [100%] 37374088 seeds, 32813410 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 99 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/temp_ccuulgrtdf/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 99 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/861456/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fa6fc7aa170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.67it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.64it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [186.42888 404.8223  148.64091 125.55129 210.6339   82.75744 141.2159
  53.224   164.02792 424.5922  155.52956 133.45482 240.02466  83.9431
 146.57379  52.33569]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
22
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 97 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4538232 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 97 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       38 seeds,       35 streamlines,        1 selected
tckgen: [  0%]       39 seeds,       36 streamlines,        1 selected
tckgen: [  0%]     1741 seeds,     1583 streamlines,      152 selected
tckgen: [  0%]     4961 seeds,     4585 streamlines,      479 selected
tckgen: [  1%]    10434 seeds,     9637 streamlines,     1000 selected
tckgen: [  2%]    22531 seeds,    20816 streamlines,     2152 selected
tckgen: [  4%]    46261 seeds,    42717 streamlines,     4411 selected
tckgen: [  9%]    93520 seeds,    86477 streamlines,     9000 selected
tckgen: [ 18%]   186991 seeds,   172798 streamlines,    18000 selected
tckgen: [ 36%]   373778 seeds,   345224 streamlines,    36000 selected
tckgen: [ 72%]   749461 seeds,   691680 streamlines,    72538 selected
tckgen: [100%]  1033590 seeds,   954058 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       52 seeds,       44 streamlines,        1 selected
tckgen: [  0%]       53 seeds,       44 streamlines,        1 selected
tckgen: [  0%]     1931 seeds,     1726 streamlines,      131 selected
tckgen: [  0%]     5861 seeds,     5269 streamlines,      420 selected
tckgen: [  0%]    13591 seeds,    12261 streamlines,      976 selected
tckgen: [  2%]    26901 seeds,    24352 streamlines,     2000 selected
tckgen: [  4%]    53794 seeds,    48695 streamlines,     4000 selected
tckgen: [  8%]   109841 seeds,    99510 streamlines,     8285 selected
tckgen: [ 16%]   223961 seeds,   202842 streamlines,    16996 selected
tckgen: [ 33%]   447751 seeds,   405542 streamlines,    33582 selected
tckgen: [ 67%]   895501 seeds,   811214 streamlines,    67212 selected
tckgen: [100%]  1330454 seeds,  1205166 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       93 seeds,       76 streamlines,        1 selected
tckgen: [  0%]       94 seeds,       77 streamlines,        1 selected
tckgen: [  0%]     2121 seeds,     1910 streamlines,        6 selected
tckgen: [  0%]     6341 seeds,     5753 streamlines,       23 selected
tckgen: [  0%]    14581 seeds,    13219 streamlines,       64 selected
tckgen: [  0%]    31371 seeds,    28448 streamlines,      158 selected
tckgen: [  0%]    65531 seeds,    59413 streamlines,      344 selected
tckgen: [  0%]   133171 seeds,   120631 streamlines,      702 selected
tckgen: [  1%]   265331 seeds,   240560 streamlines,     1388 selected
tckgen: [  2%]   533041 seeds,   483258 streamlines,     2796 selected
tckgen: [  5%]  1067631 seeds,   967845 streamlines,     5706 selected
tckgen: [ 11%]  2140541 seeds,  1940734 streamlines,    11429 selected
tckgen: [ 23%]  4271041 seeds,  3871501 streamlines,    23054 selected
tckgen: [ 45%]  8553291 seeds,  7752307 streamlines,    45764 selected
tckgen: [ 91%] 17118971 seeds, 15515259 streamlines,    91713 selected
tckgen: [100%] 18649613 seeds, 16902717 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 97 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/temp_ckeomrrspd/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [=================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 97 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/917255/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fe2eb531170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:33,  1.60it/s]Processing:   4%|3         | 2/54 [00:01<00:32,  1.61it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.64it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
done
total posterior volume:  [221.80034  489.4574   179.95287  125.34001  192.73732   77.90883
 147.9453    51.94081  226.41026  472.19797  164.89067  134.8621
 239.11569   81.20284  154.37143   61.856453]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
23
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 102 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4545322 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 102 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       14 seeds,       11 streamlines,        1 selected
tckgen: [  0%]       15 seeds,       12 streamlines,        1 selected
tckgen: [  0%]     1491 seeds,     1414 streamlines,      129 selected
tckgen: [  0%]     4441 seeds,     4201 streamlines,      373 selected
tckgen: [  0%]    10301 seeds,     9734 streamlines,      929 selected
tckgen: [  1%]    20471 seeds,    19352 streamlines,     1874 selected
tckgen: [  3%]    41761 seeds,    39471 streamlines,     3724 selected
tckgen: [  7%]    83511 seeds,    78924 streamlines,     7624 selected
tckgen: [ 15%]   167861 seeds,   158746 streamlines,    15270 selected
tckgen: [ 30%]   335721 seeds,   317474 streamlines,    30491 selected
tckgen: [ 61%]   672581 seeds,   636043 streamlines,    61146 selected
tckgen: [100%]  1100497 seeds,  1040729 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       36 seeds,       35 streamlines,        1 selected
tckgen: [  0%]       37 seeds,       36 streamlines,        1 selected
tckgen: [  0%]     1831 seeds,     1690 streamlines,      217 selected
tckgen: [  0%]     5351 seeds,     4965 streamlines,      632 selected
tckgen: [  1%]    11001 seeds,    10183 streamlines,     1297 selected
tckgen: [  2%]    23801 seeds,    22024 streamlines,     2808 selected
tckgen: [  5%]    47041 seeds,    43532 streamlines,     5512 selected
tckgen: [ 11%]    96021 seeds,    88851 streamlines,    11315 selected
tckgen: [ 22%]   194831 seeds,   180225 streamlines,    22814 selected
tckgen: [ 46%]   390871 seeds,   361760 streamlines,    46303 selected
tckgen: [ 92%]   781331 seeds,   723054 streamlines,    92617 selected
tckgen: [100%]   842283 seeds,   779351 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       66 seeds,       61 streamlines,        1 selected
tckgen: [  0%]       67 seeds,       62 streamlines,        1 selected
tckgen: [  0%]     2201 seeds,     2038 streamlines,       17 selected
tckgen: [  0%]     6321 seeds,     5874 streamlines,       52 selected
tckgen: [  0%]    14661 seeds,    13595 streamlines,      121 selected
tckgen: [  0%]    31571 seeds,    29254 streamlines,      273 selected
tckgen: [  0%]    64921 seeds,    60118 streamlines,      556 selected
tckgen: [  1%]   129671 seeds,   120141 streamlines,     1163 selected
tckgen: [  2%]   261031 seeds,   241780 streamlines,     2354 selected
tckgen: [  4%]   524451 seeds,   485614 streamlines,     4710 selected
tckgen: [  9%]  1054291 seeds,   976034 streamlines,     9547 selected
tckgen: [ 19%]  2105811 seeds,  1949662 streamlines,    19038 selected
tckgen: [ 38%]  4208201 seeds,  3895330 streamlines,    38104 selected
tckgen: [ 76%]  8423186 seeds,  7797194 streamlines,    76000 selected
tckgen: [100%] 11075913 seeds, 10253351 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 102 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/temp_bauvydbnqj/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 102 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/105923/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fe9747ad170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.63it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.62it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.63it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.64it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.64it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.64it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:25,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:22,  1.63it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.64it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.64it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.63it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.61it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.59it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.60it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.63it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.64it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.72it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.72it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
done
total posterior volume:  [183.86566  433.37164  138.84679  120.38501  228.53804   86.577354
 139.51883   47.56601  200.97412  420.72388  151.06181  126.75318
 221.32762   89.91657  140.59094   50.7363  ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
24
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4593715 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       50 seeds,       42 streamlines,        1 selected
tckgen: [  0%]       51 seeds,       43 streamlines,        1 selected
tckgen: [  0%]     1721 seeds,     1612 streamlines,      135 selected
tckgen: [  0%]     4931 seeds,     4618 streamlines,      377 selected
tckgen: [  0%]    11261 seeds,    10571 streamlines,      863 selected
tckgen: [  1%]    22451 seeds,    21014 streamlines,     1724 selected
tckgen: [  3%]    46261 seeds,    43337 streamlines,     3481 selected
tckgen: [  7%]    92643 seeds,    86851 streamlines,     7000 selected
tckgen: [ 14%]   187065 seeds,   175375 streamlines,    14000 selected
tckgen: [ 28%]   375563 seeds,   352348 streamlines,    28000 selected
tckgen: [ 56%]   752885 seeds,   706554 streamlines,    56000 selected
tckgen: [100%]  1347260 seeds,  1264138 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       39 seeds,       28 streamlines,        1 selected
tckgen: [  0%]       40 seeds,       29 streamlines,        1 selected
tckgen: [  0%]     1861 seeds,     1648 streamlines,      152 selected
tckgen: [  0%]     5591 seeds,     4962 streamlines,      436 selected
tckgen: [  1%]    12730 seeds,    11267 streamlines,     1000 selected
tckgen: [  2%]    25424 seeds,    22504 streamlines,     2000 selected
tckgen: [  4%]    50820 seeds,    44922 streamlines,     4001 selected
tckgen: [  8%]   105161 seeds,    93001 streamlines,     8233 selected
tckgen: [ 16%]   211771 seeds,   187192 streamlines,    16529 selected
tckgen: [ 33%]   424451 seeds,   375494 streamlines,    33133 selected
tckgen: [ 66%]   853451 seeds,   755307 streamlines,    66390 selected
tckgen: [100%]  1282730 seeds,  1135458 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      255 seeds,      225 streamlines,        1 selected
tckgen: [  0%]      256 seeds,      225 streamlines,        1 selected
tckgen: [  0%]     2251 seeds,     1989 streamlines,       17 selected
tckgen: [  0%]     6221 seeds,     5522 streamlines,       48 selected
tckgen: [  0%]    13951 seeds,    12320 streamlines,      114 selected
tckgen: [  0%]    29641 seeds,    26191 streamlines,      260 selected
tckgen: [  0%]    60971 seeds,    53943 streamlines,      553 selected
tckgen: [  1%]   122591 seeds,   108307 streamlines,     1110 selected
tckgen: [  2%]   246741 seeds,   218311 streamlines,     2272 selected
tckgen: [  4%]   494101 seeds,   437433 streamlines,     4521 selected
tckgen: [  9%]   990951 seeds,   877253 streamlines,     9020 selected
tckgen: [ 18%]  1985111 seeds,  1757654 streamlines,    18210 selected
tckgen: [ 36%]  3965931 seeds,  3512660 streamlines,    36430 selected
tckgen: [ 72%]  7924331 seeds,  7019634 streamlines,    72796 selected
tckgen: [100%] 10889386 seeds,  9646727 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/temp_czsrllklqy/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 102 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/114823/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fd5afc4d170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.72it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.72it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.72it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.72it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.72it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.72it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.73it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.73it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.73it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.73it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.73it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.72it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.73it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.73it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.73it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.73it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.72it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.73it/s]Processing:  30%|##9       | 16/54 [00:09<00:21,  1.73it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.73it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.72it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.73it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.73it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.72it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.72it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.72it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.73it/s]Processing:  65%|######4   | 35/54 [00:20<00:10,  1.73it/s]Processing:  67%|######6   | 36/54 [00:20<00:10,  1.72it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.72it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.72it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.73it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.73it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.73it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.72it/s]Processing:  80%|#######9  | 43/54 [00:24<00:06,  1.72it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.72it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.72it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.72it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.72it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.72it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.73it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.73it/s]Processing:   4%|3         | 2/54 [00:01<00:29,  1.73it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.73it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.73it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.73it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.73it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.72it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.72it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.72it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.72it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.72it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.72it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.72it/s]Processing:  43%|####2     | 23/54 [00:13<00:17,  1.73it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.73it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.72it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.73it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.72it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.72it/s]Processing:  67%|######6   | 36/54 [00:20<00:10,  1.72it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.72it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.72it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.72it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.73it/s]Processing:  80%|#######9  | 43/54 [00:24<00:06,  1.72it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.72it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.73it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.73it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.73it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.72it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.73it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
done
total posterior volume:  [181.38269  402.72247  159.44157  110.15168  196.76292   81.85485
 130.05011   43.40534  201.62012  417.0008   138.90344  119.899765
 216.28938   74.74234  134.76588   44.439503]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
25
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  6,430.67 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 100 40 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4455947 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 100 40 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       67 seeds,       62 streamlines,        1 selected
tckgen: [  0%]       68 seeds,       63 streamlines,        1 selected
tckgen: [  0%]     1601 seeds,     1532 streamlines,      152 selected
tckgen: [  0%]     4611 seeds,     4422 streamlines,      460 selected
tckgen: [  1%]    10155 seeds,     9710 streamlines,     1000 selected
tckgen: [  2%]    20551 seeds,    19670 streamlines,     2094 selected
tckgen: [  4%]    42401 seeds,    40565 streamlines,     4291 selected
tckgen: [  8%]    86341 seeds,    82565 streamlines,     8703 selected
tckgen: [ 17%]   172591 seeds,   164994 streamlines,    17450 selected
tckgen: [ 35%]   346140 seeds,   330732 streamlines,    35000 selected
tckgen: [ 69%]   687481 seeds,   656816 streamlines,    69522 selected
tckgen: [100%]   988896 seeds,   944922 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       14 seeds,       12 streamlines,        1 selected
tckgen: [  0%]       15 seeds,       13 streamlines,        1 selected
tckgen: [  0%]     1871 seeds,     1723 streamlines,      172 selected
tckgen: [  0%]     6051 seeds,     5568 streamlines,      565 selected
tckgen: [  1%]    12131 seeds,    11189 streamlines,     1079 selected
tckgen: [  2%]    27061 seeds,    24939 streamlines,     2473 selected
tckgen: [  5%]    54721 seeds,    50358 streamlines,     5000 selected
tckgen: [ 10%]   112681 seeds,   103698 streamlines,    10267 selected
tckgen: [ 20%]   228591 seeds,   210331 streamlines,    20983 selected
tckgen: [ 41%]   457791 seeds,   421165 streamlines,    41954 selected
tckgen: [ 84%]   918321 seeds,   844445 streamlines,    84367 selected
tckgen: [100%]  1088993 seeds,  1001275 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      152 seeds,      141 streamlines,        1 selected
tckgen: [  0%]      153 seeds,      142 streamlines,        1 selected
tckgen: [  0%]     2491 seeds,     2296 streamlines,       26 selected
tckgen: [  0%]     7231 seeds,     6645 streamlines,       87 selected
tckgen: [  0%]    16471 seeds,    15148 streamlines,      170 selected
tckgen: [  0%]    34761 seeds,    31929 streamlines,      330 selected
tckgen: [  0%]    71971 seeds,    66111 streamlines,      632 selected
tckgen: [  1%]   144821 seeds,   133065 streamlines,     1212 selected
tckgen: [  2%]   291221 seeds,   267698 streamlines,     2405 selected
tckgen: [  4%]   584671 seeds,   537460 streamlines,     4785 selected
tckgen: [  9%]  1170271 seeds,  1075870 streamlines,     9581 selected
tckgen: [ 19%]  2340961 seeds,  2152501 streamlines,    19180 selected
tckgen: [ 37%]  4683641 seeds,  4307135 streamlines,    37953 selected
tckgen: [ 75%]  9367001 seeds,  8612561 streamlines,    75473 selected
tckgen: [100%] 12380104 seeds, 11383000 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 100 40 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/temp_fhfumnpwln/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 100 40 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/122317/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f9c38e60170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.64it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.65it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.65it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.63it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.64it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.65it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.62it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.64it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.63it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.63it/s]Processing:  67%|######6   | 36/54 [00:21<00:11,  1.63it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.64it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [204.20235  537.63666  153.82423  127.51811  245.52382   82.452965
 151.96971   52.06551  206.99696  527.814    139.91136  127.86156
 265.15115   80.59397  161.31279   55.2198  ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
26
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/data.nii.gz'
sending incremental file list
bvals

sent 1,449 bytes  received 35 bytes  2,968.00 bytes/sec
total size is 1,345  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 92 100 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4845955 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 92 100 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       49 seeds,       44 streamlines,        1 selected
tckgen: [  0%]       50 seeds,       45 streamlines,        1 selected
tckgen: [  0%]     1791 seeds,     1690 streamlines,      137 selected
tckgen: [  0%]     5051 seeds,     4773 streamlines,      424 selected
tckgen: [  1%]    11335 seeds,    10690 streamlines,     1000 selected
tckgen: [  2%]    22740 seeds,    21478 streamlines,     2000 selected
tckgen: [  4%]    47051 seeds,    44373 streamlines,     4165 selected
tckgen: [  8%]    94851 seeds,    89582 streamlines,     8457 selected
tckgen: [ 16%]   190051 seeds,   179478 streamlines,    16698 selected
tckgen: [ 33%]   380631 seeds,   359582 streamlines,    33572 selected
tckgen: [ 66%]   759181 seeds,   717010 streamlines,    66952 selected
tckgen: [100%]  1135178 seeds,  1072193 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        6 seeds,        5 streamlines,        1 selected
tckgen: [  0%]        7 seeds,        6 streamlines,        1 selected
tckgen: [  0%]     1771 seeds,     1570 streamlines,      156 selected
tckgen: [  0%]     5551 seeds,     4964 streamlines,      495 selected
tckgen: [  1%]    10886 seeds,     9749 streamlines,     1000 selected
tckgen: [  2%]    24351 seeds,    21800 streamlines,     2254 selected
tckgen: [  4%]    51321 seeds,    45914 streamlines,     4878 selected
tckgen: [  9%]   102821 seeds,    92005 streamlines,     9781 selected
tckgen: [ 19%]   207801 seeds,   185623 streamlines,    19798 selected
tckgen: [ 39%]   414851 seeds,   370513 streamlines,    39532 selected
tckgen: [ 79%]   827831 seeds,   739297 streamlines,    79286 selected
tckgen: [100%]  1043122 seeds,   931516 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      243 seeds,      220 streamlines,        1 selected
tckgen: [  0%]      244 seeds,      220 streamlines,        1 selected
tckgen: [  0%]     2191 seeds,     1984 streamlines,        7 selected
tckgen: [  0%]     6191 seeds,     5570 streamlines,       27 selected
tckgen: [  0%]    14141 seeds,    12601 streamlines,       85 selected
tckgen: [  0%]    30121 seeds,    26871 streamlines,      187 selected
tckgen: [  0%]    62091 seeds,    55480 streamlines,      384 selected
tckgen: [  0%]   125821 seeds,   112402 streamlines,      759 selected
tckgen: [  1%]   252451 seeds,   225691 streamlines,     1577 selected
tckgen: [  3%]   502911 seeds,   449242 streamlines,     3168 selected
tckgen: [  6%]  1011171 seeds,   902620 streamlines,     6432 selected
tckgen: [ 12%]  2026441 seeds,  1809019 streamlines,    12675 selected
tckgen: [ 25%]  4037481 seeds,  3605044 streamlines,    25383 selected
tckgen: [ 50%]  8064081 seeds,  7200117 streamlines,    50730 selected
tckgen: [100%] 15869265 seeds, 14170214 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 92 100 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/temp_vdadpjmilq/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 92 100 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/130518/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f7872cb9170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:12,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
done
total posterior volume:  [200.93462  401.03674  158.66566  104.582306 193.95786   65.61163
 132.45177   40.35152  209.60077  444.3166   154.195    133.32367
 208.66406   66.96673  128.06126   43.883823]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
27
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/data.nii.gz'
sending incremental file list
bvals

sent 1,005 bytes  received 35 bytes  2,080.00 bytes/sec
total size is 901  speedup is 0.87
sending incremental file list
bvecs

sent 6,476 bytes  received 35 bytes  13,022.00 bytes/sec
total size is 6,372  speedup is 0.98
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 101 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4957599 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 101 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       22 seeds,       19 streamlines,        1 selected
tckgen: [  0%]       23 seeds,       20 streamlines,        1 selected
tckgen: [  0%]     1731 seeds,     1645 streamlines,      173 selected
tckgen: [  0%]     5071 seeds,     4804 streamlines,      538 selected
tckgen: [  1%]    10571 seeds,    10017 streamlines,     1208 selected
tckgen: [  2%]    22201 seeds,    21060 streamlines,     2600 selected
tckgen: [  5%]    44141 seeds,    41918 streamlines,     5186 selected
tckgen: [ 10%]    89721 seeds,    85054 streamlines,    10584 selected
tckgen: [ 21%]   180561 seeds,   171062 streamlines,    21406 selected
tckgen: [ 42%]   362271 seeds,   343312 streamlines,    42995 selected
tckgen: [ 85%]   721871 seeds,   683924 streamlines,    85337 selected
tckgen: [100%]   845902 seeds,   801557 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       38 seeds,       33 streamlines,        1 selected
tckgen: [  0%]       39 seeds,       34 streamlines,        1 selected
tckgen: [  0%]     1641 seeds,     1482 streamlines,      220 selected
tckgen: [  0%]     4721 seeds,     4254 streamlines,      590 selected
tckgen: [  1%]     9321 seeds,     8398 streamlines,     1186 selected
tckgen: [  2%]    20831 seeds,    18790 streamlines,     2706 selected
tckgen: [  5%]    41621 seeds,    37502 streamlines,     5316 selected
tckgen: [ 10%]    85911 seeds,    77478 streamlines,    10791 selected
tckgen: [ 22%]   171366 seeds,   154606 streamlines,    22000 selected
tckgen: [ 44%]   343886 seeds,   310175 streamlines,    44001 selected
tckgen: [ 89%]   693805 seeds,   625372 streamlines,    89000 selected
tckgen: [100%]   779114 seeds,   702471 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      443 seeds,      400 streamlines,        1 selected
tckgen: [  0%]      444 seeds,      401 streamlines,        1 selected
tckgen: [  0%]     2131 seeds,     1922 streamlines,       11 selected
tckgen: [  0%]     5671 seeds,     5100 streamlines,       30 selected
tckgen: [  0%]    12661 seeds,    11407 streamlines,       99 selected
tckgen: [  0%]    26731 seeds,    24106 streamlines,      186 selected
tckgen: [  0%]    54761 seeds,    49388 streamlines,      371 selected
tckgen: [  0%]   111581 seeds,   100583 streamlines,      761 selected
tckgen: [  1%]   224001 seeds,   201876 streamlines,     1484 selected
tckgen: [  2%]   449991 seeds,   405699 streamlines,     2969 selected
tckgen: [  5%]   903021 seeds,   814418 streamlines,     5994 selected
tckgen: [ 12%]  1816471 seeds,  1637736 streamlines,    12076 selected
tckgen: [ 24%]  3644021 seeds,  3285795 streamlines,    24214 selected
tckgen: [ 48%]  7295811 seeds,  6579634 streamlines,    48648 selected
tckgen: [ 97%] 14604071 seeds, 13170448 streamlines,    97170 selected
tckgen: [100%] 15025193 seeds, 13550115 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 101 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/temp_vwebizibyn/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 101 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/137128/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f43f43ad170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.72it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.72it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.72it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.72it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.72it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.72it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.73it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.73it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.72it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.70it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.72it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.72it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.72it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.72it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.73it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.73it/s]Processing:  17%|#6        | 9/54 [00:05<00:25,  1.73it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.72it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.73it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.73it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.72it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.72it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.73it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.73it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.73it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.73it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.73it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.73it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.73it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:20<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.72it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.72it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.72it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.72it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.72it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.72it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.72it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.72it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.73it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.73it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.73it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.73it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.73it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.73it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.73it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.73it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.73it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.73it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.73it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.73it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.73it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.73it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.73it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.74it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.73it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.73it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.72it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.73it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.73it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.73it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.73it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.73it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.73it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.72it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.72it/s]Processing:  35%|###5      | 19/54 [00:10<00:20,  1.73it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.73it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.73it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.72it/s]Processing:  43%|####2     | 23/54 [00:13<00:17,  1.73it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.73it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.73it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.73it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.73it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.72it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.72it/s]Processing:  57%|#####7    | 31/54 [00:17<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:20<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.72it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.72it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.72it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.72it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.72it/s]Processing:  80%|#######9  | 43/54 [00:24<00:06,  1.72it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.73it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.73it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.73it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.73it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.73it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.73it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.73it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.74it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.73it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.73it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.72it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.73it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.73it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.72it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.72it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.72it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.72it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.73it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.72it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.72it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.73it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.72it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.72it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.72it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.72it/s]Processing:  67%|######6   | 36/54 [00:20<00:10,  1.72it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.72it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.72it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.73it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.72it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.72it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.72it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.73it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.72it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.72it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.72it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]
done
total posterior volume:  [178.21698  480.14526  156.52078  109.53759  210.95186   79.580025
 131.0288    51.848995 177.75476  434.02213  165.33765  108.77729
 162.09749   85.39315  124.683586  52.707016]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
28
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4821954 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       12 seeds,        9 streamlines,        1 selected
tckgen: [  0%]       13 seeds,       10 streamlines,        1 selected
tckgen: [  0%]     1621 seeds,     1509 streamlines,      176 selected
tckgen: [  0%]     4851 seeds,     4548 streamlines,      503 selected
tckgen: [  1%]    10371 seeds,     9762 streamlines,     1105 selected
tckgen: [  2%]    21981 seeds,    20672 streamlines,     2337 selected
tckgen: [  4%]    45421 seeds,    42754 streamlines,     4889 selected
tckgen: [  9%]    91371 seeds,    86045 streamlines,     9863 selected
tckgen: [ 19%]   182891 seeds,   172313 streamlines,    19701 selected
tckgen: [ 39%]   366731 seeds,   345485 streamlines,    39606 selected
tckgen: [ 78%]   734681 seeds,   692176 streamlines,    78757 selected
tckgen: [100%]   933062 seeds,   879172 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       33 seeds,       23 streamlines,        1 selected
tckgen: [  0%]       34 seeds,       23 streamlines,        1 selected
tckgen: [  0%]     1731 seeds,     1561 streamlines,      177 selected
tckgen: [  0%]     5111 seeds,     4588 streamlines,      596 selected
tckgen: [  1%]    10511 seeds,     9423 streamlines,     1190 selected
tckgen: [  2%]    22611 seeds,    20322 streamlines,     2576 selected
tckgen: [  5%]    45281 seeds,    40714 streamlines,     5182 selected
tckgen: [ 10%]    93891 seeds,    84404 streamlines,    10780 selected
tckgen: [ 21%]   188791 seeds,   169555 streamlines,    21516 selected
tckgen: [ 43%]   380131 seeds,   341202 streamlines,    43000 selected
tckgen: [ 86%]   762591 seeds,   684672 streamlines,    86089 selected
tckgen: [100%]   886493 seeds,   795997 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      102 seeds,       87 streamlines,        1 selected
tckgen: [  0%]      103 seeds,       88 streamlines,        1 selected
tckgen: [  0%]     2221 seeds,     1977 streamlines,       32 selected
tckgen: [  0%]     6301 seeds,     5659 streamlines,       85 selected
tckgen: [  0%]    14441 seeds,    12936 streamlines,      173 selected
tckgen: [  0%]    30731 seeds,    27559 streamlines,      383 selected
tckgen: [  0%]    63321 seeds,    56883 streamlines,      802 selected
tckgen: [  1%]   126791 seeds,   113855 streamlines,     1626 selected
tckgen: [  3%]   254251 seeds,   228364 streamlines,     3406 selected
tckgen: [  6%]   513191 seeds,   460896 streamlines,     6765 selected
tckgen: [ 13%]  1031081 seeds,   925714 streamlines,    13596 selected
tckgen: [ 27%]  2066181 seeds,  1854082 streamlines,    27201 selected
tckgen: [ 53%]  4138331 seeds,  3713984 streamlines,    53905 selected
tckgen: [100%]  7646799 seeds,  6863880 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/temp_vntusxqhen/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 99 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/143325/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fc0c55ea170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
done
total posterior volume:  [214.57909  464.22552  155.87343  122.24877  230.07732   84.987366
 128.96886   44.980682 230.61957  430.0232   138.89192  128.90668
 252.62984   86.42628  132.45782   47.542587]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
29
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 96 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4428930 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 96 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        6 seeds,        5 streamlines,        1 selected
tckgen: [  0%]        7 seeds,        6 streamlines,        1 selected
tckgen: [  0%]     1681 seeds,     1601 streamlines,      169 selected
tckgen: [  0%]     5121 seeds,     4889 streamlines,      485 selected
tckgen: [  1%]    10512 seeds,     9998 streamlines,     1000 selected
tckgen: [  2%]    22741 seeds,    21698 streamlines,     2156 selected
tckgen: [  4%]    46491 seeds,    44417 streamlines,     4458 selected
tckgen: [  9%]    93442 seeds,    89300 streamlines,     9000 selected
tckgen: [ 18%]   188238 seeds,   179735 streamlines,    18000 selected
tckgen: [ 35%]   378971 seeds,   361802 streamlines,    35893 selected
tckgen: [ 71%]   754981 seeds,   720925 streamlines,    71075 selected
tckgen: [100%]  1066226 seeds,  1018093 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       12 seeds,       12 streamlines,        1 selected
tckgen: [  0%]       13 seeds,       13 streamlines,        1 selected
tckgen: [  0%]     1831 seeds,     1794 streamlines,      163 selected
tckgen: [  0%]     5621 seeds,     5451 streamlines,      442 selected
tckgen: [  1%]    11903 seeds,    11534 streamlines,     1000 selected
tckgen: [  2%]    25631 seeds,    24829 streamlines,     2168 selected
tckgen: [  4%]    53311 seeds,    51733 streamlines,     4468 selected
tckgen: [  9%]   106911 seeds,   103861 streamlines,     9079 selected
tckgen: [ 18%]   212781 seeds,   206735 streamlines,    18138 selected
tckgen: [ 36%]   428701 seeds,   416465 streamlines,    36467 selected
tckgen: [ 73%]   858101 seeds,   833735 streamlines,    73137 selected
tckgen: [100%]  1173294 seeds,  1139763 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      480 seeds,      468 streamlines,        1 selected
tckgen: [  0%]      481 seeds,      469 streamlines,        1 selected
tckgen: [  0%]     2751 seeds,     2663 streamlines,       10 selected
tckgen: [  0%]     7021 seeds,     6820 streamlines,       31 selected
tckgen: [  0%]    16001 seeds,    15538 streamlines,       71 selected
tckgen: [  0%]    33711 seeds,    32742 streamlines,      155 selected
tckgen: [  0%]    69131 seeds,    67132 streamlines,      311 selected
tckgen: [  0%]   140181 seeds,   136114 streamlines,      674 selected
tckgen: [  1%]   280461 seeds,   272312 streamlines,     1351 selected
tckgen: [  2%]   561301 seeds,   545170 streamlines,     2795 selected
tckgen: [  5%]  1123891 seeds,  1091639 streamlines,     5589 selected
tckgen: [ 11%]  2254871 seeds,  2190428 streamlines,    11272 selected
tckgen: [ 22%]  4513531 seeds,  4385186 streamlines,    22477 selected
tckgen: [ 44%]  9037831 seeds,  8780484 streamlines,    44772 selected
tckgen: [ 89%] 18087351 seeds, 17570349 streamlines,    89887 selected
tckgen: [100%] 20106635 seeds, 19531893 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 96 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/temp_llnnoplwru/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 96 45 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/146129/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f20e22c3170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.64it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.64it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.64it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:22,  1.59it/s]Processing:  35%|###5      | 19/54 [00:11<00:22,  1.53it/s]Processing:  37%|###7      | 20/54 [00:12<00:22,  1.52it/s]Processing:  39%|###8      | 21/54 [00:12<00:21,  1.55it/s]Processing:  41%|####      | 22/54 [00:13<00:20,  1.53it/s]Processing:  43%|####2     | 23/54 [00:14<00:20,  1.50it/s]Processing:  44%|####4     | 24/54 [00:14<00:19,  1.50it/s]Processing:  46%|####6     | 25/54 [00:15<00:18,  1.55it/s]Processing:  48%|####8     | 26/54 [00:16<00:17,  1.58it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.60it/s]Processing:  52%|#####1    | 28/54 [00:17<00:16,  1.62it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:19<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:22<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.59it/s]Processing:  85%|########5 | 46/54 [00:28<00:05,  1.59it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.61it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.63it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.62it/s]Processing:   7%|7         | 4/54 [00:02<00:31,  1.60it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.62it/s]Processing:  11%|#1        | 6/54 [00:03<00:30,  1.60it/s]Processing:  13%|#2        | 7/54 [00:04<00:29,  1.57it/s]Processing:  15%|#4        | 8/54 [00:05<00:30,  1.53it/s]Processing:  17%|#6        | 9/54 [00:05<00:30,  1.50it/s]Processing:  19%|#8        | 10/54 [00:06<00:30,  1.47it/s]Processing:  20%|##        | 11/54 [00:07<00:28,  1.49it/s]Processing:  22%|##2       | 12/54 [00:07<00:27,  1.50it/s]Processing:  24%|##4       | 13/54 [00:08<00:26,  1.54it/s]Processing:  26%|##5       | 14/54 [00:09<00:25,  1.57it/s]Processing:  28%|##7       | 15/54 [00:09<00:24,  1.59it/s]Processing:  30%|##9       | 16/54 [00:10<00:23,  1.61it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.63it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.63it/s]Processing:  35%|###5      | 19/54 [00:12<00:21,  1.63it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:13<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:15<00:18,  1.65it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:16<00:16,  1.65it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.63it/s]Processing:  54%|#####3    | 29/54 [00:18<00:15,  1.63it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:19<00:13,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.65it/s]Processing:  63%|######2   | 34/54 [00:21<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:22<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:24<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:27<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:30<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:32<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.63it/s]
done
total posterior volume:  [236.79126  525.27075  177.33083  117.16434  260.45993   82.45886
 145.39687   55.30036  237.6318   474.11172  151.97519  122.909065
 261.0824    84.61142  143.1097    62.408607]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
30
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 105 54 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4443818 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 105 54 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       45 seeds,       41 streamlines,        1 selected
tckgen: [  0%]       46 seeds,       41 streamlines,        1 selected
tckgen: [  0%]     1481 seeds,     1439 streamlines,      112 selected
tckgen: [  0%]     4231 seeds,     4111 streamlines,      298 selected
tckgen: [  0%]     9661 seeds,     9384 streamlines,      685 selected
tckgen: [  1%]    19471 seeds,    18899 streamlines,     1388 selected
tckgen: [  2%]    39861 seeds,    38671 streamlines,     2864 selected
tckgen: [  5%]    80591 seeds,    78224 streamlines,     5675 selected
tckgen: [ 11%]   162781 seeds,   158074 streamlines,    11481 selected
tckgen: [ 22%]   323021 seeds,   313878 streamlines,    22770 selected
tckgen: [ 45%]   645351 seeds,   627058 streamlines,    45890 selected
tckgen: [ 91%]  1289291 seeds,  1252618 streamlines,    91493 selected
tckgen: [100%]  1409090 seeds,  1369014 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       56 seeds,       53 streamlines,        1 selected
tckgen: [  0%]       57 seeds,       54 streamlines,        1 selected
tckgen: [  0%]     1751 seeds,     1741 streamlines,       89 selected
tckgen: [  0%]     4951 seeds,     4936 streamlines,      278 selected
tckgen: [  0%]    11321 seeds,    11285 streamlines,      635 selected
tckgen: [  1%]    23011 seeds,    22930 streamlines,     1279 selected
tckgen: [  2%]    47241 seeds,    47073 streamlines,     2628 selected
tckgen: [  5%]    95401 seeds,    95058 streamlines,     5270 selected
tckgen: [ 10%]   193231 seeds,   192542 streamlines,    10652 selected
tckgen: [ 21%]   387571 seeds,   386190 streamlines,    21455 selected
tckgen: [ 42%]   777691 seeds,   774929 streamlines,    42885 selected
tckgen: [ 86%]  1559197 seeds,  1553471 streamlines,    86000 selected
tckgen: [100%]  1809575 seeds,  1802918 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      233 seeds,      232 streamlines,        1 selected
tckgen: [  0%]      234 seeds,      233 streamlines,        1 selected
tckgen: [  0%]     2031 seeds,     2023 streamlines,       23 selected
tckgen: [  0%]     5471 seeds,     5455 streamlines,       50 selected
tckgen: [  0%]    12321 seeds,    12275 streamlines,      125 selected
tckgen: [  0%]    26291 seeds,    26187 streamlines,      274 selected
tckgen: [  0%]    54411 seeds,    54204 streamlines,      546 selected
tckgen: [  1%]   109201 seeds,   108776 streamlines,     1106 selected
tckgen: [  2%]   220281 seeds,   219431 streamlines,     2220 selected
tckgen: [  4%]   442111 seeds,   440432 streamlines,     4380 selected
tckgen: [  8%]   886731 seeds,   883386 streamlines,     8832 selected
tckgen: [ 17%]  1771811 seeds,  1765188 streamlines,    17600 selected
tckgen: [ 35%]  3542401 seeds,  3529367 streamlines,    35110 selected
tckgen: [ 70%]  7082071 seeds,  7055788 streamlines,    70053 selected
tckgen: [100%] 10113426 seeds, 10075719 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 105 54 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/temp_sxbfwjvuqv/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 105 54 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/149741/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fdbbe0bc170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.64it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.64it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.63it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.63it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.63it/s]Processing:  24%|##4       | 13/54 [00:07<00:25,  1.63it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.64it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.64it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.64it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.64it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.63it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.63it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.63it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.63it/s]Processing:  67%|######6   | 36/54 [00:21<00:11,  1.64it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.64it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.63it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.63it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.64it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
done
total posterior volume:  [193.57054 387.2219  179.51497 130.34062 244.53227  73.52043 141.31116
  51.09903 191.83403 410.5148  182.51625 123.12028 232.23941  73.29408
 140.36118  49.15882]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
31
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/data.nii.gz'
sending incremental file list
bvals

sent 1,448 bytes  received 35 bytes  2,966.00 bytes/sec
total size is 1,344  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 89 97 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4726955 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 89 97 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]        9 seeds,        8 streamlines,        1 selected
tckgen: [  0%]       10 seeds,        9 streamlines,        1 selected
tckgen: [  0%]     1711 seeds,     1583 streamlines,      216 selected
tckgen: [  0%]     5141 seeds,     4741 streamlines,      574 selected
tckgen: [  1%]    10731 seeds,     9909 streamlines,     1182 selected
tckgen: [  2%]    23061 seeds,    21311 streamlines,     2537 selected
tckgen: [  5%]    46151 seeds,    42640 streamlines,     5224 selected
tckgen: [ 10%]    95611 seeds,    88413 streamlines,    10765 selected
tckgen: [ 21%]   190511 seeds,   176248 streamlines,    21400 selected
tckgen: [ 42%]   382141 seeds,   353632 streamlines,    42991 selected
tckgen: [ 85%]   762181 seeds,   704905 streamlines,    85331 selected
tckgen: [100%]   892872 seeds,   825856 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       58 seeds,       53 streamlines,        1 selected
tckgen: [  0%]       59 seeds,       54 streamlines,        1 selected
tckgen: [  0%]     2141 seeds,     1840 streamlines,      111 selected
tckgen: [  0%]     6431 seeds,     5433 streamlines,      365 selected
tckgen: [  0%]    15181 seeds,    12813 streamlines,      800 selected
tckgen: [  1%]    30001 seeds,    25365 streamlines,     1596 selected
tckgen: [  3%]    60481 seeds,    51125 streamlines,     3236 selected
tckgen: [  6%]   122371 seeds,   103410 streamlines,     6596 selected
tckgen: [ 13%]   250041 seeds,   211379 streamlines,    13686 selected
tckgen: [ 27%]   500231 seeds,   422835 streamlines,    27409 selected
tckgen: [ 55%]  1002545 seeds,   846951 streamlines,    55000 selected
tckgen: [100%]  1825404 seeds,  1542310 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      113 seeds,       77 streamlines,        1 selected
tckgen: [  0%]      114 seeds,       78 streamlines,        1 selected
tckgen: [  0%]     2571 seeds,     2138 streamlines,       27 selected
tckgen: [  0%]     7391 seeds,     6212 streamlines,       82 selected
tckgen: [  0%]    17011 seeds,    14355 streamlines,      184 selected
tckgen: [  0%]    36291 seeds,    30578 streamlines,      351 selected
tckgen: [  0%]    75481 seeds,    63595 streamlines,      770 selected
tckgen: [  1%]   150791 seeds,   127175 streamlines,     1616 selected
tckgen: [  3%]   302121 seeds,   255200 streamlines,     3240 selected
tckgen: [  6%]   607391 seeds,   513518 streamlines,     6464 selected
tckgen: [ 12%]  1223631 seeds,  1034020 streamlines,    12901 selected
tckgen: [ 25%]  2444751 seeds,  2065751 streamlines,    25790 selected
tckgen: [ 51%]  4883901 seeds,  4126630 streamlines,    51752 selected
tckgen: [100%]  9412505 seeds,  7954189 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 89 97 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/temp_evqtmflftd/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 89 97 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/158035/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fcce5122170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.64it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.63it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.63it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.63it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [227.67786  452.1771   164.52782  111.76536  190.73383   76.22385
 132.92906   56.051792 212.46536  458.7154   170.38106  110.30135
 216.14072   76.86518  136.15512   62.461735]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
32
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 100 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4942016 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 100 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        3 seeds,        3 streamlines,        1 selected
tckgen: [  0%]        4 seeds,        4 streamlines,        1 selected
tckgen: [  0%]     1601 seeds,     1463 streamlines,      203 selected
tckgen: [  0%]     4871 seeds,     4507 streamlines,      620 selected
tckgen: [  1%]    10351 seeds,     9625 streamlines,     1295 selected
tckgen: [  2%]    22311 seeds,    20793 streamlines,     2780 selected
tckgen: [  5%]    43591 seeds,    40574 streamlines,     5485 selected
tckgen: [ 11%]    88244 seeds,    82193 streamlines,    11000 selected
tckgen: [ 22%]   178251 seeds,   166106 streamlines,    22285 selected
tckgen: [ 44%]   356311 seeds,   332127 streamlines,    44701 selected
tckgen: [ 88%]   705441 seeds,   657498 streamlines,    88784 selected
tckgen: [100%]   796134 seeds,   742016 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        9 seeds,        8 streamlines,        1 selected
tckgen: [  0%]       10 seeds,        9 streamlines,        1 selected
tckgen: [  0%]     1711 seeds,     1608 streamlines,      181 selected
tckgen: [  0%]     5221 seeds,     4883 streamlines,      502 selected
tckgen: [  1%]    11083 seeds,    10382 streamlines,     1000 selected
tckgen: [  2%]    23831 seeds,    22330 streamlines,     2162 selected
tckgen: [  4%]    49371 seeds,    46346 streamlines,     4584 selected
tckgen: [  9%]    99661 seeds,    93594 streamlines,     9171 selected
tckgen: [ 18%]   202571 seeds,   190324 streamlines,    18789 selected
tckgen: [ 37%]   403601 seeds,   379375 streamlines,    37732 selected
tckgen: [ 75%]   811711 seeds,   762827 streamlines,    75740 selected
tckgen: [100%]  1072506 seeds,  1007974 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      432 seeds,      398 streamlines,        1 selected
tckgen: [  0%]      433 seeds,      399 streamlines,        1 selected
tckgen: [  0%]     2401 seeds,     2255 streamlines,        7 selected
tckgen: [  0%]     6201 seeds,     5830 streamlines,       22 selected
tckgen: [  0%]    14081 seeds,    13221 streamlines,       52 selected
tckgen: [  0%]    29791 seeds,    27993 streamlines,       99 selected
tckgen: [  0%]    61071 seeds,    57352 streamlines,      196 selected
tckgen: [  0%]   124311 seeds,   116800 streamlines,      372 selected
tckgen: [  0%]   249501 seeds,   234555 streamlines,      753 selected
tckgen: [  1%]   497901 seeds,   468046 streamlines,     1506 selected
tckgen: [  3%]   997951 seeds,   938069 streamlines,     3012 selected
tckgen: [  6%]  1998251 seeds,  1877888 streamlines,     6107 selected
tckgen: [ 12%]  4014551 seeds,  3773186 streamlines,    12324 selected
tckgen: [ 24%]  8050701 seeds,  7567379 streamlines,    24674 selected
tckgen: [ 49%] 16121941 seeds, 15153956 streamlines,    49564 selected
tckgen: [ 99%] 32306131 seeds, 30366931 streamlines,    99470 selected
tckgen: [100%] 32478802 seeds, 30529302 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 100 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/temp_zkrokzivrq/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 100 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/172332/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7eff1fafe170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.62it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.63it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.64it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.64it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.64it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.64it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.64it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.64it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.63it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:16,  1.62it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.62it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.63it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.64it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.64it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.64it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.64it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.63it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.64it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.64it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.63it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.64it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.63it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.65it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.63it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.65it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [176.4629   390.5632   144.11713  132.01335  193.56917   83.67788
 134.72806   51.81074  178.04846  392.04343  153.68063  126.974144
 187.1244    82.73394  123.49777   53.072655]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
33
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/data.nii.gz'
sending incremental file list
bvals

sent 1,448 bytes  received 35 bytes  2,966.00 bytes/sec
total size is 1,344  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 97 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4804912 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 97 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       25 seeds,       22 streamlines,        1 selected
tckgen: [  0%]       26 seeds,       23 streamlines,        1 selected
tckgen: [  0%]     1791 seeds,     1640 streamlines,      224 selected
tckgen: [  0%]     5161 seeds,     4757 streamlines,      624 selected
tckgen: [  1%]    10601 seeds,     9731 streamlines,     1301 selected
tckgen: [  2%]    23091 seeds,    21244 streamlines,     2834 selected
tckgen: [  5%]    46361 seeds,    42710 streamlines,     5710 selected
tckgen: [ 11%]    94311 seeds,    86942 streamlines,    11545 selected
tckgen: [ 23%]   190821 seeds,   176108 streamlines,    23214 selected
tckgen: [ 46%]   380791 seeds,   351438 streamlines,    46098 selected
tckgen: [ 92%]   758576 seeds,   700020 streamlines,    92001 selected
tckgen: [100%]   822875 seeds,   759316 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       11 seeds,        9 streamlines,        1 selected
tckgen: [  0%]       12 seeds,       10 streamlines,        1 selected
tckgen: [  0%]     1991 seeds,     1808 streamlines,      165 selected
tckgen: [  0%]     5731 seeds,     5225 streamlines,      500 selected
tckgen: [  1%]    12057 seeds,    10926 streamlines,     1000 selected
tckgen: [  2%]    25861 seeds,    23499 streamlines,     2164 selected
tckgen: [  4%]    53881 seeds,    49067 streamlines,     4499 selected
tckgen: [  9%]   109011 seeds,    99356 streamlines,     9178 selected
tckgen: [ 18%]   219241 seeds,   199722 streamlines,    18666 selected
tckgen: [ 37%]   443331 seeds,   403854 streamlines,    37654 selected
tckgen: [ 75%]   890341 seeds,   811126 streamlines,    75343 selected
tckgen: [100%]  1179462 seeds,  1074578 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      498 seeds,      452 streamlines,        1 selected
tckgen: [  0%]      499 seeds,      453 streamlines,        1 selected
tckgen: [  0%]     2701 seeds,     2456 streamlines,       26 selected
tckgen: [  0%]     7291 seeds,     6661 streamlines,       69 selected
tckgen: [  0%]    16551 seeds,    15073 streamlines,      148 selected
tckgen: [  0%]    34901 seeds,    31787 streamlines,      315 selected
tckgen: [  0%]    71741 seeds,    65339 streamlines,      643 selected
tckgen: [  1%]   143761 seeds,   131058 streamlines,     1234 selected
tckgen: [  2%]   289191 seeds,   263440 streamlines,     2440 selected
tckgen: [  4%]   579091 seeds,   527371 streamlines,     4919 selected
tckgen: [  9%]  1166881 seeds,  1062818 streamlines,     9879 selected
tckgen: [ 19%]  2338441 seeds,  2129775 streamlines,    19691 selected
tckgen: [ 39%]  4674491 seeds,  4257157 streamlines,    39553 selected
tckgen: [ 79%]  9331721 seeds,  8499092 streamlines,    79430 selected
tckgen: [100%] 11755869 seeds, 10706866 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 97 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/temp_xbudqzmmyv/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 97 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/177746/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f083daa4170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.64it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.63it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.64it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.64it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.64it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.64it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.63it/s]Processing:  28%|##7       | 15/54 [00:09<00:24,  1.62it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.61it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.62it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.63it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.63it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.63it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.63it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.63it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.63it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.64it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.63it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.64it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.63it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.63it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.63it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [207.72116  434.32516  154.53134  110.04898  197.11751   76.25615
 127.172424  50.863068 207.75928  474.62216  148.34306  111.95994
 194.29332   85.63542  132.38268   57.40317 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
34
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 96 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4572253 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 96 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       43 seeds,       40 streamlines,        1 selected
tckgen: [  0%]       44 seeds,       41 streamlines,        1 selected
tckgen: [  0%]     1871 seeds,     1744 streamlines,      180 selected
tckgen: [  0%]     5321 seeds,     4940 streamlines,      565 selected
tckgen: [  1%]    10971 seeds,    10192 streamlines,     1198 selected
tckgen: [  2%]    23511 seeds,    21909 streamlines,     2576 selected
tckgen: [  5%]    47401 seeds,    44204 streamlines,     5280 selected
tckgen: [ 10%]    97461 seeds,    91020 streamlines,    10971 selected
tckgen: [ 22%]   194227 seeds,   181149 streamlines,    22000 selected
tckgen: [ 44%]   387797 seeds,   361442 streamlines,    44000 selected
tckgen: [ 87%]   775081 seeds,   721965 streamlines,    87671 selected
tckgen: [100%]   884560 seeds,   823975 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       45 seeds,       29 streamlines,        1 selected
tckgen: [  0%]       46 seeds,       30 streamlines,        1 selected
tckgen: [  0%]     2081 seeds,     1678 streamlines,      144 selected
tckgen: [  0%]     6111 seeds,     4929 streamlines,      443 selected
tckgen: [  1%]    13796 seeds,    11099 streamlines,     1000 selected
tckgen: [  2%]    27035 seeds,    21833 streamlines,     2000 selected
tckgen: [  4%]    55961 seeds,    45261 streamlines,     4165 selected
tckgen: [  8%]   114681 seeds,    92974 streamlines,     8656 selected
tckgen: [ 17%]   230631 seeds,   186603 streamlines,    17299 selected
tckgen: [ 34%]   458801 seeds,   371451 streamlines,    34193 selected
tckgen: [ 68%]   918211 seeds,   744032 streamlines,    68451 selected
tckgen: [100%]  1343155 seeds,  1088116 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]      149 seeds,      120 streamlines,        1 selected
tckgen: [  0%]      150 seeds,      121 streamlines,        1 selected
tckgen: [  0%]     2431 seeds,     1957 streamlines,       18 selected
tckgen: [  0%]     6811 seeds,     5517 streamlines,       57 selected
tckgen: [  0%]    15761 seeds,    12668 streamlines,      136 selected
tckgen: [  0%]    33531 seeds,    27055 streamlines,      303 selected
tckgen: [  0%]    68911 seeds,    55724 streamlines,      592 selected
tckgen: [  1%]   137851 seeds,   111449 streamlines,     1163 selected
tckgen: [  2%]   277801 seeds,   224623 streamlines,     2334 selected
tckgen: [  4%]   556321 seeds,   450184 streamlines,     4649 selected
tckgen: [  9%]  1116781 seeds,   903863 streamlines,     9341 selected
tckgen: [ 18%]  2236601 seeds,  1810796 streamlines,    18718 selected
tckgen: [ 37%]  4475161 seeds,  3623961 streamlines,    37684 selected
tckgen: [ 75%]  8949841 seeds,  7248185 streamlines,    75702 selected
tckgen: [100%] 11819695 seeds,  9572062 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 96 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/temp_pbojvadmkz/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 96 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/187547/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f1d1d3db170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:29,  1.61it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.62it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.62it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.63it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.64it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.64it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.65it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.65it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.65it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.63it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.65it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.65it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.65it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.65it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.65it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.61it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.61it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.62it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.63it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.63it/s]Processing:  67%|######6   | 36/54 [00:21<00:11,  1.61it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.61it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.63it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.62it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.63it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]
done
total posterior volume:  [190.21236  476.74512  169.25383  126.48135  219.36427   82.12216
 141.8959    51.361046 207.14178  468.37787  159.24644  127.89863
 256.05496   83.85399  141.05087   55.100277]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
35
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/data.nii.gz'
sending incremental file list
bvals

sent 1,449 bytes  received 35 bytes  2,968.00 bytes/sec
total size is 1,345  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 101 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4925132 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 101 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]        2 seeds,        2 streamlines,        1 selected
tckgen: [  0%]        3 seeds,        3 streamlines,        1 selected
tckgen: [  0%]     1881 seeds,     1767 streamlines,      184 selected
tckgen: [  0%]     5521 seeds,     5159 streamlines,      540 selected
tckgen: [  1%]    11081 seeds,    10348 streamlines,     1096 selected
tckgen: [  2%]    24281 seeds,    22717 streamlines,     2432 selected
tckgen: [  5%]    49165 seeds,    45999 streamlines,     5000 selected
tckgen: [ 10%]    99731 seeds,    93317 streamlines,    10153 selected
tckgen: [ 20%]   199921 seeds,   187041 streamlines,    20489 selected
tckgen: [ 41%]   399231 seeds,   373441 streamlines,    41091 selected
tckgen: [ 82%]   799381 seeds,   747537 streamlines,    82446 selected
tckgen: [100%]   968247 seeds,   905401 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       50 seeds,       41 streamlines,        1 selected
tckgen: [  0%]       51 seeds,       42 streamlines,        1 selected
tckgen: [  0%]     1731 seeds,     1613 streamlines,      159 selected
tckgen: [  0%]     4991 seeds,     4683 streamlines,      456 selected
tckgen: [  1%]    10524 seeds,     9862 streamlines,     1000 selected
tckgen: [  2%]    22181 seeds,    20814 streamlines,     2082 selected
tckgen: [  4%]    45701 seeds,    42927 streamlines,     4489 selected
tckgen: [  9%]    91602 seeds,    86135 streamlines,     9000 selected
tckgen: [ 18%]   184411 seeds,   173445 streamlines,    18329 selected
tckgen: [ 37%]   372150 seeds,   350098 streamlines,    37000 selected
tckgen: [ 74%]   750041 seeds,   705684 streamlines,    74748 selected
tckgen: [100%]  1003474 seeds,   943968 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      235 seeds,      220 streamlines,        1 selected
tckgen: [  0%]      236 seeds,      221 streamlines,        1 selected
tckgen: [  0%]     2171 seeds,     2060 streamlines,       17 selected
tckgen: [  0%]     5961 seeds,     5610 streamlines,       40 selected
tckgen: [  0%]    13711 seeds,    12907 streamlines,       90 selected
tckgen: [  0%]    29331 seeds,    27629 streamlines,      189 selected
tckgen: [  0%]    60941 seeds,    57442 streamlines,      366 selected
tckgen: [  0%]   123321 seeds,   116160 streamlines,      708 selected
tckgen: [  1%]   246821 seeds,   232316 streamlines,     1384 selected
tckgen: [  2%]   495001 seeds,   465874 streamlines,     2815 selected
tckgen: [  5%]   991051 seeds,   932596 streamlines,     5612 selected
tckgen: [ 11%]  1993011 seeds,  1875282 streamlines,    11267 selected
tckgen: [ 22%]  3978151 seeds,  3742409 streamlines,    22633 selected
tckgen: [ 44%]  7944231 seeds,  7473427 streamlines,    44830 selected
tckgen: [ 89%] 15877131 seeds, 14936943 streamlines,    89455 selected
tckgen: [100%] 17756679 seeds, 16705471 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 101 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/temp_amycjlgvfe/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 101 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/194140/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fc20c924170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:33,  1.60it/s]Processing:   4%|3         | 2/54 [00:01<00:32,  1.62it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.63it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.64it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.63it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.64it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.64it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.64it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.64it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.63it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.64it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.63it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.63it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.64it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.63it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.64it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.64it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.64it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.65it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.62it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.63it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.63it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.64it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.64it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.64it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.64it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.64it/s]Processing:  24%|##4       | 13/54 [00:07<00:25,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.63it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.65it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.64it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.63it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.63it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.61it/s]Processing:  67%|######6   | 36/54 [00:22<00:11,  1.61it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.61it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.62it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.62it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.63it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.63it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.63it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.64it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.63it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.64it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.64it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.64it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.63it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.63it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.63it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.63it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.63it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.64it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.64it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:27,  1.63it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.63it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.63it/s]Processing:  24%|##4       | 13/54 [00:07<00:25,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.64it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.64it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.63it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.64it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.63it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.64it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.63it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.64it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.64it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.64it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.64it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.63it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.64it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.64it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.64it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.64it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.64it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.63it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.64it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.65it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.65it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.64it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.64it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.64it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.64it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.64it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.63it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.64it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.64it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.64it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.64it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.63it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.60it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.61it/s]Processing:  52%|#####1    | 28/54 [00:17<00:16,  1.62it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.62it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.63it/s]Processing:  57%|#####7    | 31/54 [00:18<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.64it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.63it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
done
total posterior volume:  [162.81686  381.69333  164.38017  122.43608  182.64565   74.382164
 128.80385   43.426388 178.0122   378.17957  161.21564  118.855286
 200.09341   78.94134  130.59053   46.921604]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
36
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 98 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4571299 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 98 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       44 seeds,       36 streamlines,        1 selected
tckgen: [  0%]       45 seeds,       37 streamlines,        1 selected
tckgen: [  0%]     1911 seeds,     1794 streamlines,      178 selected
tckgen: [  0%]     5411 seeds,     5058 streamlines,      576 selected
tckgen: [  1%]    11161 seeds,    10383 streamlines,     1183 selected
tckgen: [  2%]    24361 seeds,    22677 streamlines,     2708 selected
tckgen: [  5%]    48731 seeds,    45320 streamlines,     5390 selected
tckgen: [ 10%]   100231 seeds,    93265 streamlines,    10999 selected
tckgen: [ 22%]   199361 seeds,   185403 streamlines,    22200 selected
tckgen: [ 44%]   399471 seeds,   371457 streamlines,    44570 selected
tckgen: [ 89%]   797891 seeds,   742026 streamlines,    89000 selected
tckgen: [100%]   895523 seeds,   832716 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       10 seeds,        7 streamlines,        1 selected
tckgen: [  0%]       11 seeds,        8 streamlines,        1 selected
tckgen: [  0%]     1871 seeds,     1547 streamlines,      135 selected
tckgen: [  0%]     5761 seeds,     4726 streamlines,      431 selected
tckgen: [  0%]    13421 seeds,    10948 streamlines,      994 selected
tckgen: [  1%]    27141 seeds,    22198 streamlines,     1934 selected
tckgen: [  3%]    55291 seeds,    45338 streamlines,     3982 selected
tckgen: [  8%]   111048 seeds,    91243 streamlines,     8000 selected
tckgen: [ 16%]   223411 seeds,   183783 streamlines,    16183 selected
tckgen: [ 32%]   448701 seeds,   369200 streamlines,    32498 selected
tckgen: [ 65%]   900911 seeds,   741665 streamlines,    65410 selected
tckgen: [100%]  1381890 seeds,  1137797 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      380 seeds,      308 streamlines,        1 selected
tckgen: [  0%]      381 seeds,      309 streamlines,        1 selected
tckgen: [  0%]     2331 seeds,     1920 streamlines,       18 selected
tckgen: [  0%]     6431 seeds,     5323 streamlines,       69 selected
tckgen: [  0%]    14471 seeds,    11950 streamlines,      168 selected
tckgen: [  0%]    30461 seeds,    25191 streamlines,      348 selected
tckgen: [  0%]    62721 seeds,    51726 streamlines,      739 selected
tckgen: [  1%]   125521 seeds,   103632 streamlines,     1544 selected
tckgen: [  3%]   250981 seeds,   207078 streamlines,     3014 selected
tckgen: [  6%]   503671 seeds,   415297 streamlines,     6106 selected
tckgen: [ 12%]  1010321 seeds,   832854 streamlines,    12239 selected
tckgen: [ 24%]  2023751 seeds,  1668879 streamlines,    24786 selected
tckgen: [ 49%]  4033951 seeds,  3324923 streamlines,    49575 selected
tckgen: [ 99%]  8056001 seeds,  6639976 streamlines,    99078 selected
tckgen: [100%]  8131661 seeds,  6702450 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 98 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/temp_yknqnacqys/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 98 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/200109/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f3ced4fc170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.69it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.72it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.70it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.70it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.70it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.72it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.71it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.72it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.71it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.72it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.72it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.72it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.72it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.72it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.71it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.71it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.72it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
done
total posterior volume:  [210.15173  462.58264  167.63531  122.53868  228.8144    83.15227
 143.23402   59.300613 221.39873  450.09476  161.76245  135.11217
 235.2034    90.35153  156.20654   61.624557]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
37
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 92 101 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4873888 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 92 101 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       21 seeds,       17 streamlines,        1 selected
tckgen: [  0%]       22 seeds,       18 streamlines,        1 selected
tckgen: [  0%]     1601 seeds,     1514 streamlines,      159 selected
tckgen: [  0%]     4731 seeds,     4505 streamlines,      451 selected
tckgen: [  1%]    10176 seeds,     9696 streamlines,     1000 selected
tckgen: [  2%]    21531 seeds,    20502 streamlines,     2076 selected
tckgen: [  4%]    44011 seeds,    41840 streamlines,     4220 selected
tckgen: [  8%]    90921 seeds,    86343 streamlines,     8742 selected
tckgen: [ 17%]   182921 seeds,   173823 streamlines,    17599 selected
tckgen: [ 35%]   364924 seeds,   346641 streamlines,    35000 selected
tckgen: [ 69%]   729871 seeds,   693301 streamlines,    69829 selected
tckgen: [100%]  1045918 seeds,   993776 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       55 seeds,       42 streamlines,        1 selected
tckgen: [  0%]       56 seeds,       43 streamlines,        1 selected
tckgen: [  0%]     1741 seeds,     1540 streamlines,      115 selected
tckgen: [  0%]     5001 seeds,     4446 streamlines,      353 selected
tckgen: [  0%]    11621 seeds,    10301 streamlines,      786 selected
tckgen: [  1%]    23661 seeds,    21031 streamlines,     1589 selected
tckgen: [  3%]    47953 seeds,    42746 streamlines,     3233 selected
tckgen: [  6%]    98081 seeds,    87609 streamlines,     6497 selected
tckgen: [ 13%]   196514 seeds,   175876 streamlines,    13000 selected
tckgen: [ 26%]   394181 seeds,   352805 streamlines,    26061 selected
tckgen: [ 52%]   789281 seeds,   706251 streamlines,    52177 selected
tckgen: [100%]  1513106 seeds,  1353854 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      228 seeds,      192 streamlines,        1 selected
tckgen: [  0%]      229 seeds,      193 streamlines,        1 selected
tckgen: [  0%]     1961 seeds,     1764 streamlines,        6 selected
tckgen: [  0%]     5371 seeds,     4831 streamlines,       17 selected
tckgen: [  0%]    12401 seeds,    11126 streamlines,       37 selected
tckgen: [  0%]    26461 seeds,    23667 streamlines,       71 selected
tckgen: [  0%]    54421 seeds,    48728 streamlines,      145 selected
tckgen: [  0%]   109961 seeds,    98358 streamlines,      288 selected
tckgen: [  0%]   220921 seeds,   197704 streamlines,      619 selected
tckgen: [  1%]   442831 seeds,   396388 streamlines,     1245 selected
tckgen: [  2%]   887101 seeds,   793810 streamlines,     2483 selected
tckgen: [  5%]  1773764 seeds,  1587414 streamlines,     5000 selected
tckgen: [ 10%]  3568251 seeds,  3193189 streamlines,    10052 selected
tckgen: [ 19%]  7143831 seeds,  6393072 streamlines,    19984 selected
tckgen: [ 39%] 14290321 seeds, 12787094 streamlines,    39958 selected
tckgen: [ 80%] 28610551 seeds, 25601203 streamlines,    80526 selected
tckgen: [100%] 35434605 seeds, 31706836 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 92 101 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/temp_qnkbsgbtcb/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 92 101 44 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/204521/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fa0c8d83170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.63it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.65it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.62it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.63it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.64it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.65it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.65it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.65it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.65it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.65it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.65it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.65it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.65it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.65it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.65it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.64it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.64it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.67it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.67it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.65it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.65it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.65it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.65it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.65it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.65it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.65it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
done
total posterior volume:  [213.11555 409.9785  198.15622 140.64066 256.0318   82.90053 153.21039
  44.81389 235.7778  424.7768  187.18079 134.86058 254.28177  82.64214
 154.75493  48.5827 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
38
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/data.nii.gz'
sending incremental file list
bvals

sent 1,448 bytes  received 35 bytes  2,966.00 bytes/sec
total size is 1,344  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 102 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4486488 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 102 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      104 seeds,       93 streamlines,        1 selected
tckgen: [  0%]      105 seeds,       94 streamlines,        1 selected
tckgen: [  0%]     2101 seeds,     1990 streamlines,      156 selected
tckgen: [  0%]     6101 seeds,     5758 streamlines,      424 selected
tckgen: [  0%]    14021 seeds,    13256 streamlines,      981 selected
tckgen: [  1%]    28231 seeds,    26640 streamlines,     1930 selected
tckgen: [  3%]    56281 seeds,    53207 streamlines,     3797 selected
tckgen: [  7%]   114231 seeds,   107999 streamlines,     7670 selected
tckgen: [ 15%]   228551 seeds,   216218 streamlines,    15406 selected
tckgen: [ 31%]   458523 seeds,   433805 streamlines,    31000 selected
tckgen: [ 62%]   912091 seeds,   863133 streamlines,    62067 selected
tckgen: [100%]  1473856 seeds,  1394528 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       76 seeds,       66 streamlines,        1 selected
tckgen: [  0%]       77 seeds,       66 streamlines,        1 selected
tckgen: [  0%]     1071 seeds,      980 streamlines,      102 selected
tckgen: [  0%]     2981 seeds,     2745 streamlines,      267 selected
tckgen: [  0%]     6971 seeds,     6408 streamlines,      627 selected
tckgen: [  1%]    13771 seeds,    12691 streamlines,     1264 selected
tckgen: [  2%]    28151 seeds,    25925 streamlines,     2645 selected
tckgen: [  5%]    57451 seeds,    52785 streamlines,     5433 selected
tckgen: [ 10%]   116881 seeds,   107449 streamlines,    10990 selected
tckgen: [ 22%]   234082 seeds,   215171 streamlines,    22000 selected
tckgen: [ 44%]   469301 seeds,   431627 streamlines,    44293 selected
tckgen: [ 89%]   941351 seeds,   865428 streamlines,    89149 selected
tckgen: [100%]  1058054 seeds,   972677 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      320 seeds,      293 streamlines,        1 selected
tckgen: [  0%]      321 seeds,      294 streamlines,        1 selected
tckgen: [  0%]     2371 seeds,     2188 streamlines,        8 selected
tckgen: [  0%]     6541 seeds,     6032 streamlines,       26 selected
tckgen: [  0%]    14961 seeds,    13732 streamlines,       62 selected
tckgen: [  0%]    31301 seeds,    28737 streamlines,      140 selected
tckgen: [  0%]    64011 seeds,    58862 streamlines,      321 selected
tckgen: [  0%]   130061 seeds,   119577 streamlines,      666 selected
tckgen: [  1%]   260391 seeds,   239473 streamlines,     1328 selected
tckgen: [  2%]   521591 seeds,   479504 streamlines,     2647 selected
tckgen: [  5%]  1043181 seeds,   959337 streamlines,     5318 selected
tckgen: [ 10%]  2089881 seeds,  1921553 streamlines,    10807 selected
tckgen: [ 21%]  4186281 seeds,  3849340 streamlines,    21338 selected
tckgen: [ 43%]  8391681 seeds,  7715933 streamlines,    43019 selected
tckgen: [ 86%] 16797061 seeds, 15442382 streamlines,    86060 selected
tckgen: [100%] 19533460 seeds, 17958434 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 102 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/temp_xwararlkhn/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 102 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/287248/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f84a993a170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.72it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.73it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.72it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.72it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.72it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.72it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.72it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.72it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.72it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.72it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.72it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.71it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.71it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.71it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.72it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.72it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.71it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.70it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.70it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.70it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.70it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.70it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.70it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.70it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.70it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.70it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.70it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.70it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.70it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.70it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.69it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.70it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.70it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.70it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.69it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.69it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.65it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.65it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.69it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.70it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.70it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.70it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.70it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.70it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.70it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.70it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.70it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]
done
total posterior volume:  [210.51059  412.9798   181.08574  153.43413  225.05235   80.11979
 159.83374   55.766407 200.43674  445.81253  183.48253  162.67816
 237.18      79.42874  160.7818    57.258057]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
39
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/data.nii.gz'
sending incremental file list
bvals

sent 1,449 bytes  received 35 bytes  2,968.00 bytes/sec
total size is 1,345  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 93 105 52 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4485418 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 93 105 52 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       19 seeds,       16 streamlines,        1 selected
tckgen: [  0%]       20 seeds,       17 streamlines,        1 selected
tckgen: [  0%]     1711 seeds,     1632 streamlines,       84 selected
tckgen: [  0%]     4961 seeds,     4732 streamlines,      251 selected
tckgen: [  0%]    11421 seeds,    10895 streamlines,      575 selected
tckgen: [  1%]    23421 seeds,    22352 streamlines,     1262 selected
tckgen: [  2%]    47781 seeds,    45612 streamlines,     2613 selected
tckgen: [  5%]    96651 seeds,    92173 streamlines,     5333 selected
tckgen: [ 10%]   196241 seeds,   187095 streamlines,    10847 selected
tckgen: [ 21%]   391291 seeds,   373223 streamlines,    21838 selected
tckgen: [ 43%]   783171 seeds,   747268 streamlines,    43662 selected
tckgen: [ 87%]  1563311 seeds,  1491780 streamlines,    87223 selected
tckgen: [100%]  1797658 seeds,  1715287 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       53 seeds,       50 streamlines,        1 selected
tckgen: [  0%]       54 seeds,       51 streamlines,        1 selected
tckgen: [  0%]     1901 seeds,     1834 streamlines,      152 selected
tckgen: [  0%]     5421 seeds,     5201 streamlines,      500 selected
tckgen: [  1%]    11354 seeds,    10893 streamlines,     1000 selected
tckgen: [  2%]    24001 seeds,    22996 streamlines,     2172 selected
tckgen: [  4%]    48531 seeds,    46517 streamlines,     4490 selected
tckgen: [  9%]    98439 seeds,    94363 streamlines,     9000 selected
tckgen: [ 18%]   198131 seeds,   189828 streamlines,    18090 selected
tckgen: [ 36%]   399601 seeds,   382866 streamlines,    36566 selected
tckgen: [ 73%]   800201 seeds,   767042 streamlines,    73621 selected
tckgen: [100%]  1084577 seeds,  1039698 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       52 seeds,       48 streamlines,        1 selected
tckgen: [  0%]       53 seeds,       49 streamlines,        1 selected
tckgen: [  0%]     2081 seeds,     1983 streamlines,       25 selected
tckgen: [  0%]     6021 seeds,     5755 streamlines,       61 selected
tckgen: [  0%]    14041 seeds,    13447 streamlines,      149 selected
tckgen: [  0%]    30151 seeds,    28895 streamlines,      324 selected
tckgen: [  0%]    61631 seeds,    59071 streamlines,      695 selected
tckgen: [  1%]   124091 seeds,   118893 streamlines,     1356 selected
tckgen: [  2%]   249251 seeds,   238745 streamlines,     2835 selected
tckgen: [  5%]   498471 seeds,   477463 streamlines,     5632 selected
tckgen: [ 11%]   997491 seeds,   955651 streamlines,    11437 selected
tckgen: [ 22%]  1996541 seeds,  1913334 streamlines,    22827 selected
tckgen: [ 45%]  3994411 seeds,  3827984 streamlines,    45851 selected
tckgen: [ 91%]  8001891 seeds,  7668841 streamlines,    91693 selected
tckgen: [100%]  8723106 seeds,  8359906 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 93 105 52 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/temp_ayfctcajfy/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 93 105 52 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/433839/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f5feec6a170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.71it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.71it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.70it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.71it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.71it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.70it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.71it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.71it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.71it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.71it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.71it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.71it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.70it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.71it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.70it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.70it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.71it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.71it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.71it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.71it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.70it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.71it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.71it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.71it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.72it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.72it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.72it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.73it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.72it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.72it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.72it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.72it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.73it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.72it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.73it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.72it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.72it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.72it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.72it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.72it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.73it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.72it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.73it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.71it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.72it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.73it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.73it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.73it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.72it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.72it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.72it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.72it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.72it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.71it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.72it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.72it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.70it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.70it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.70it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.70it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.70it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.72it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.70it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.74it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.73it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.73it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.73it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.72it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.73it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.72it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.72it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.72it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.72it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.73it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.73it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.74it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.74it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.73it/s]Processing:  30%|##9       | 16/54 [00:09<00:21,  1.73it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.73it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.74it/s]Processing:  35%|###5      | 19/54 [00:10<00:20,  1.74it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.74it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.73it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.73it/s]Processing:  43%|####2     | 23/54 [00:13<00:17,  1.73it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.72it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.73it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.73it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.72it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.73it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.73it/s]Processing:  57%|#####7    | 31/54 [00:17<00:13,  1.73it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.74it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.73it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.73it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.73it/s]Processing:  67%|######6   | 36/54 [00:20<00:10,  1.73it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.73it/s]Processing:  70%|#######   | 38/54 [00:21<00:09,  1.73it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.74it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.72it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.73it/s]Processing:  78%|#######7  | 42/54 [00:24<00:06,  1.73it/s]Processing:  80%|#######9  | 43/54 [00:24<00:06,  1.73it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.73it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.73it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.73it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.72it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.72it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.72it/s]Processing:  93%|#########2| 50/54 [00:28<00:02,  1.72it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.73it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.73it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.71it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.72it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.72it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.73it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.72it/s]Processing:  11%|#1        | 6/54 [00:03<00:27,  1.73it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.73it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.73it/s]Processing:  17%|#6        | 9/54 [00:05<00:25,  1.73it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.73it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.72it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.72it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.72it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.72it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.73it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.71it/s]Processing:  33%|###3      | 18/54 [00:10<00:20,  1.72it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.72it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:19,  1.63it/s]Processing:  43%|####2     | 23/54 [00:13<00:19,  1.58it/s]Processing:  44%|####4     | 24/54 [00:14<00:19,  1.55it/s]Processing:  46%|####6     | 25/54 [00:14<00:19,  1.52it/s]Processing:  48%|####8     | 26/54 [00:15<00:18,  1.52it/s]Processing:  50%|#####     | 27/54 [00:16<00:17,  1.58it/s]Processing:  52%|#####1    | 28/54 [00:16<00:16,  1.61it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.64it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.70it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.70it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.71it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.71it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.71it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.71it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.72it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.71it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.71it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.72it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.71it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.72it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.72it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.72it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.69it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:30,  1.73it/s]Processing:   4%|3         | 2/54 [00:01<00:29,  1.73it/s]Processing:   6%|5         | 3/54 [00:01<00:29,  1.73it/s]Processing:   7%|7         | 4/54 [00:02<00:28,  1.73it/s]Processing:   9%|9         | 5/54 [00:02<00:28,  1.71it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.71it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.72it/s]Processing:  15%|#4        | 8/54 [00:04<00:26,  1.72it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.72it/s]Processing:  19%|#8        | 10/54 [00:05<00:25,  1.73it/s]Processing:  20%|##        | 11/54 [00:06<00:24,  1.73it/s]Processing:  22%|##2       | 12/54 [00:06<00:24,  1.72it/s]Processing:  24%|##4       | 13/54 [00:07<00:23,  1.73it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.73it/s]Processing:  28%|##7       | 15/54 [00:08<00:22,  1.73it/s]Processing:  30%|##9       | 16/54 [00:09<00:21,  1.73it/s]Processing:  31%|###1      | 17/54 [00:09<00:21,  1.73it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.71it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.71it/s]Processing:  37%|###7      | 20/54 [00:11<00:19,  1.72it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.72it/s]Processing:  41%|####      | 22/54 [00:12<00:18,  1.73it/s]Processing:  43%|####2     | 23/54 [00:13<00:17,  1.73it/s]Processing:  44%|####4     | 24/54 [00:13<00:17,  1.72it/s]Processing:  46%|####6     | 25/54 [00:14<00:16,  1.72it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.72it/s]Processing:  50%|#####     | 27/54 [00:15<00:15,  1.72it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.73it/s]Processing:  54%|#####3    | 29/54 [00:16<00:14,  1.72it/s]Processing:  56%|#####5    | 30/54 [00:17<00:13,  1.72it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.71it/s]Processing:  59%|#####9    | 32/54 [00:18<00:12,  1.72it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.72it/s]Processing:  63%|######2   | 34/54 [00:19<00:11,  1.72it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.73it/s]Processing:  67%|######6   | 36/54 [00:20<00:10,  1.72it/s]Processing:  69%|######8   | 37/54 [00:21<00:09,  1.72it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.71it/s]Processing:  72%|#######2  | 39/54 [00:22<00:08,  1.71it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.72it/s]Processing:  76%|#######5  | 41/54 [00:23<00:07,  1.72it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.71it/s]Processing:  80%|#######9  | 43/54 [00:24<00:06,  1.71it/s]Processing:  81%|########1 | 44/54 [00:25<00:05,  1.72it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.72it/s]Processing:  85%|########5 | 46/54 [00:26<00:04,  1.71it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.72it/s]Processing:  89%|########8 | 48/54 [00:27<00:03,  1.71it/s]Processing:  91%|######### | 49/54 [00:28<00:02,  1.71it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.71it/s]Processing:  94%|#########4| 51/54 [00:29<00:01,  1.71it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.71it/s]Processing:  98%|#########8| 53/54 [00:30<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.71it/s]Processing: 100%|##########| 54/54 [00:31<00:00,  1.72it/s]
done
total posterior volume:  [204.82687  386.7703   162.66753  130.99725  197.9164    67.472466
 141.12163   54.378536 192.55835  426.0652   162.71223  120.893036
 225.1592    72.070145 141.7283    58.289967]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
40
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 98 47 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4597485 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 98 47 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       70 seeds,       66 streamlines,        1 selected
tckgen: [  0%]       71 seeds,       67 streamlines,        1 selected
tckgen: [  0%]     1691 seeds,     1623 streamlines,      138 selected
tckgen: [  0%]     4961 seeds,     4745 streamlines,      404 selected
tckgen: [  0%]    11311 seeds,    10805 streamlines,      964 selected
tckgen: [  1%]    22771 seeds,    21704 streamlines,     1922 selected
tckgen: [  3%]    45361 seeds,    43181 streamlines,     3898 selected
tckgen: [  7%]    92971 seeds,    88693 streamlines,     7883 selected
tckgen: [ 16%]   186262 seeds,   177713 streamlines,    16000 selected
tckgen: [ 32%]   370651 seeds,   353873 streamlines,    32064 selected
tckgen: [ 64%]   738721 seeds,   705342 streamlines,    64149 selected
tckgen: [100%]  1150934 seeds,  1099121 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       32 seeds,       30 streamlines,        1 selected
tckgen: [  0%]       33 seeds,       30 streamlines,        1 selected
tckgen: [  0%]     1911 seeds,     1790 streamlines,      137 selected
tckgen: [  0%]     5721 seeds,     5352 streamlines,      439 selected
tckgen: [  1%]    12660 seeds,    11825 streamlines,     1000 selected
tckgen: [  2%]    25971 seeds,    24245 streamlines,     2082 selected
tckgen: [  4%]    54281 seeds,    50644 streamlines,     4278 selected
tckgen: [  8%]   111771 seeds,   104312 streamlines,     8646 selected
tckgen: [ 17%]   222251 seeds,   207321 streamlines,    17307 selected
tckgen: [ 34%]   446551 seeds,   416458 streamlines,    34632 selected
tckgen: [ 69%]   892351 seeds,   832340 streamlines,    69435 selected
tckgen: [100%]  1286282 seeds,  1199914 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      348 seeds,      318 streamlines,        1 selected
tckgen: [  0%]      349 seeds,      318 streamlines,        1 selected
tckgen: [  0%]     2651 seeds,     2457 streamlines,       10 selected
tckgen: [  0%]     7201 seeds,     6689 streamlines,       34 selected
tckgen: [  0%]    16031 seeds,    14902 streamlines,      108 selected
tckgen: [  0%]    33641 seeds,    31362 streamlines,      240 selected
tckgen: [  0%]    69501 seeds,    64851 streamlines,      506 selected
tckgen: [  1%]   137831 seeds,   128582 streamlines,     1023 selected
tckgen: [  2%]   278601 seeds,   259715 streamlines,     2113 selected
tckgen: [  4%]   558381 seeds,   520834 streamlines,     4255 selected
tckgen: [  8%]  1121501 seeds,  1045893 streamlines,     8446 selected
tckgen: [ 17%]  2243131 seeds,  2092048 streamlines,    17012 selected
tckgen: [ 33%]  4481881 seeds,  4179371 streamlines,    33901 selected
tckgen: [ 67%]  8961501 seeds,  8356965 streamlines,    67911 selected
tckgen: [100%] 13229309 seeds, 12338157 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 98 47 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/temp_ripfwdoujy/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 98 47 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/599671/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f8da0a99170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.63it/s]Processing:   4%|3         | 2/54 [00:01<00:32,  1.61it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.62it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.62it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.61it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.61it/s]Processing:  13%|#2        | 7/54 [00:04<00:29,  1.61it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.61it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.61it/s]Processing:  19%|#8        | 10/54 [00:06<00:27,  1.60it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.61it/s]Processing:  22%|##2       | 12/54 [00:07<00:26,  1.61it/s]Processing:  24%|##4       | 13/54 [00:08<00:25,  1.61it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.61it/s]Processing:  28%|##7       | 15/54 [00:09<00:24,  1.61it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.61it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.61it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.61it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.60it/s]Processing:  37%|###7      | 20/54 [00:12<00:21,  1.61it/s]Processing:  39%|###8      | 21/54 [00:13<00:20,  1.61it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.61it/s]Processing:  43%|####2     | 23/54 [00:14<00:19,  1.61it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.61it/s]Processing:  46%|####6     | 25/54 [00:15<00:18,  1.61it/s]Processing:  48%|####8     | 26/54 [00:16<00:17,  1.61it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.61it/s]Processing:  52%|#####1    | 28/54 [00:17<00:16,  1.61it/s]Processing:  54%|#####3    | 29/54 [00:18<00:15,  1.62it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.62it/s]Processing:  57%|#####7    | 31/54 [00:19<00:14,  1.61it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.61it/s]Processing:  61%|######1   | 33/54 [00:20<00:13,  1.61it/s]Processing:  63%|######2   | 34/54 [00:21<00:12,  1.61it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.61it/s]Processing:  67%|######6   | 36/54 [00:22<00:11,  1.61it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.61it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.61it/s]Processing:  72%|#######2  | 39/54 [00:24<00:09,  1.61it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.59it/s]Processing:  76%|#######5  | 41/54 [00:25<00:08,  1.59it/s]Processing:  78%|#######7  | 42/54 [00:26<00:07,  1.59it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.59it/s]Processing:  81%|########1 | 44/54 [00:27<00:06,  1.60it/s]Processing:  83%|########3 | 45/54 [00:28<00:05,  1.60it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.61it/s]Processing:  87%|########7 | 47/54 [00:29<00:04,  1.60it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.61it/s]Processing:  91%|######### | 49/54 [00:30<00:03,  1.61it/s]Processing:  93%|#########2| 50/54 [00:31<00:02,  1.61it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.60it/s]Processing:  96%|#########6| 52/54 [00:32<00:01,  1.61it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.60it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.61it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.61it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.61it/s]Processing:   4%|3         | 2/54 [00:01<00:32,  1.62it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.62it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.62it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.63it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.62it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.62it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.63it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.63it/s]Processing:  19%|#8        | 10/54 [00:06<00:27,  1.62it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.62it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.62it/s]Processing:  24%|##4       | 13/54 [00:07<00:25,  1.63it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.61it/s]Processing:  28%|##7       | 15/54 [00:09<00:24,  1.62it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.62it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.62it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.62it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.61it/s]Processing:  37%|###7      | 20/54 [00:12<00:21,  1.62it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.62it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.62it/s]Processing:  43%|####2     | 23/54 [00:14<00:19,  1.62it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.62it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.62it/s]Processing:  48%|####8     | 26/54 [00:16<00:17,  1.62it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.61it/s]Processing:  52%|#####1    | 28/54 [00:17<00:16,  1.61it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.62it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.62it/s]Processing:  57%|#####7    | 31/54 [00:19<00:14,  1.62it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.62it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.62it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.62it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.61it/s]Processing:  67%|######6   | 36/54 [00:22<00:11,  1.61it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.62it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.62it/s]Processing:  72%|#######2  | 39/54 [00:24<00:09,  1.62it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.62it/s]Processing:  76%|#######5  | 41/54 [00:25<00:08,  1.62it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.62it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.62it/s]Processing:  81%|########1 | 44/54 [00:27<00:06,  1.62it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.61it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.61it/s]Processing:  87%|########7 | 47/54 [00:29<00:04,  1.62it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.61it/s]Processing:  91%|######### | 49/54 [00:30<00:03,  1.61it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.62it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.62it/s]Processing:  96%|#########6| 52/54 [00:32<00:01,  1.61it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.62it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.62it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.62it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.65it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.64it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.64it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.64it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.64it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.64it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.63it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.62it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.63it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.63it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.62it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.62it/s]Processing:  24%|##4       | 13/54 [00:07<00:25,  1.63it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.63it/s]Processing:  28%|##7       | 15/54 [00:09<00:24,  1.62it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.63it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.62it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.62it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.63it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.62it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.63it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.63it/s]Processing:  43%|####2     | 23/54 [00:14<00:19,  1.63it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.62it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.62it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.62it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.63it/s]Processing:  52%|#####1    | 28/54 [00:17<00:16,  1.62it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.59it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.60it/s]Processing:  57%|#####7    | 31/54 [00:19<00:14,  1.61it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.61it/s]Processing:  61%|######1   | 33/54 [00:20<00:13,  1.61it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.61it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.62it/s]Processing:  67%|######6   | 36/54 [00:22<00:11,  1.61it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.61it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.61it/s]Processing:  72%|#######2  | 39/54 [00:24<00:09,  1.62it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.61it/s]Processing:  76%|#######5  | 41/54 [00:25<00:08,  1.60it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.61it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.62it/s]Processing:  81%|########1 | 44/54 [00:27<00:06,  1.61it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.61it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.62it/s]Processing:  87%|########7 | 47/54 [00:29<00:04,  1.62it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.63it/s]Processing:  91%|######### | 49/54 [00:30<00:03,  1.61it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.62it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.62it/s]Processing:  96%|#########6| 52/54 [00:32<00:01,  1.62it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.62it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.62it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.62it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:32,  1.61it/s]Processing:   4%|3         | 2/54 [00:01<00:32,  1.61it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.61it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.62it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.62it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.62it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.63it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.62it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.63it/s]Processing:  19%|#8        | 10/54 [00:06<00:27,  1.63it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.63it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.62it/s]Processing:  24%|##4       | 13/54 [00:08<00:25,  1.62it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.62it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.63it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.63it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.63it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.62it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.62it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.63it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.62it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.63it/s]Processing:  43%|####2     | 23/54 [00:14<00:18,  1.63it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.61it/s]Processing:  46%|####6     | 25/54 [00:15<00:18,  1.61it/s]Processing:  48%|####8     | 26/54 [00:16<00:17,  1.61it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.62it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.63it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.62it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.63it/s]Processing:  57%|#####7    | 31/54 [00:19<00:14,  1.63it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.62it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.63it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.62it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.62it/s]Processing:  67%|######6   | 36/54 [00:22<00:11,  1.62it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.62it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.61it/s]Processing:  72%|#######2  | 39/54 [00:24<00:09,  1.62it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.62it/s]Processing:  76%|#######5  | 41/54 [00:25<00:08,  1.62it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.61it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.62it/s]Processing:  81%|########1 | 44/54 [00:27<00:06,  1.62it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.62it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.62it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.62it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.62it/s]Processing:  91%|######### | 49/54 [00:30<00:03,  1.62it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.62it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.61it/s]Processing:  96%|#########6| 52/54 [00:32<00:01,  1.61it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.61it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.63it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.62it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:33,  1.59it/s]Processing:   4%|3         | 2/54 [00:01<00:32,  1.61it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.62it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.63it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.63it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.63it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.63it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.64it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.63it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.63it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.63it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.63it/s]Processing:  24%|##4       | 13/54 [00:07<00:25,  1.63it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.62it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.63it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.63it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.63it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.62it/s]Processing:  35%|###5      | 19/54 [00:11<00:22,  1.59it/s]Processing:  37%|###7      | 20/54 [00:12<00:21,  1.59it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.61it/s]Processing:  41%|####      | 22/54 [00:13<00:20,  1.60it/s]Processing:  43%|####2     | 23/54 [00:14<00:19,  1.60it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.61it/s]Processing:  46%|####6     | 25/54 [00:15<00:18,  1.61it/s]Processing:  48%|####8     | 26/54 [00:16<00:17,  1.62it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.61it/s]Processing:  52%|#####1    | 28/54 [00:17<00:16,  1.62it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.62it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.62it/s]Processing:  57%|#####7    | 31/54 [00:19<00:14,  1.62it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.62it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.62it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.63it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.62it/s]Processing:  67%|######6   | 36/54 [00:22<00:11,  1.62it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.63it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.63it/s]Processing:  72%|#######2  | 39/54 [00:24<00:09,  1.63it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.62it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.63it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.63it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.63it/s]Processing:  81%|########1 | 44/54 [00:27<00:06,  1.62it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.62it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.62it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.63it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.62it/s]Processing:  91%|######### | 49/54 [00:30<00:03,  1.63it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.63it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.63it/s]Processing:  96%|#########6| 52/54 [00:32<00:01,  1.63it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.62it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.62it/s]Processing: 100%|##########| 54/54 [00:33<00:00,  1.62it/s]
done
total posterior volume:  [216.04634 522.3419  166.96872 146.4929  249.5468   87.61608 148.19035
  53.80468 224.51659 525.6553  155.88727 136.95636 272.71173  95.62958
 143.03374  64.31725]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
41
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/data.nii.gz'
sending incremental file list
bvals

sent 1,446 bytes  received 35 bytes  2,962.00 bytes/sec
total size is 1,342  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 90 102 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4518951 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 90 102 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]        3 seeds,        2 streamlines,        1 selected
tckgen: [  0%]        4 seeds,        2 streamlines,        1 selected
tckgen: [  0%]     1657 seeds,     1564 streamlines,      154 selected
tckgen: [  0%]     4821 seeds,     4565 streamlines,      462 selected
tckgen: [  1%]    10451 seeds,     9888 streamlines,     1000 selected
tckgen: [  2%]    21221 seeds,    20105 streamlines,     2075 selected
tckgen: [  4%]    43681 seeds,    41442 streamlines,     4238 selected
tckgen: [  8%]    89061 seeds,    84567 streamlines,     8670 selected
tckgen: [ 17%]   177621 seeds,   168574 streamlines,    17473 selected
tckgen: [ 34%]   354361 seeds,   336309 streamlines,    34736 selected
tckgen: [ 69%]   704471 seeds,   668423 streamlines,    69000 selected
tckgen: [100%]  1015957 seeds,   963890 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       21 seeds,       15 streamlines,        1 selected
tckgen: [  0%]       22 seeds,       16 streamlines,        1 selected
tckgen: [  0%]      991 seeds,      904 streamlines,       77 selected
tckgen: [  0%]     2851 seeds,     2613 streamlines,      243 selected
tckgen: [  0%]     6481 seeds,     5973 streamlines,      547 selected
tckgen: [  1%]    13291 seeds,    12285 streamlines,     1108 selected
tckgen: [  2%]    27581 seeds,    25470 streamlines,     2315 selected
tckgen: [  4%]    56471 seeds,    52107 streamlines,     4770 selected
tckgen: [  9%]   112911 seeds,   104231 streamlines,     9693 selected
tckgen: [ 19%]   225961 seeds,   208644 streamlines,    19355 selected
tckgen: [ 38%]   452511 seeds,   418115 streamlines,    38730 selected
tckgen: [ 77%]   909721 seeds,   840546 streamlines,    77991 selected
tckgen: [100%]  1166330 seeds,  1077562 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      531 seeds,      484 streamlines,        1 selected
tckgen: [  0%]      532 seeds,      485 streamlines,        1 selected
tckgen: [  0%]     2461 seeds,     2262 streamlines,       12 selected
tckgen: [  0%]     6501 seeds,     5968 streamlines,       29 selected
tckgen: [  0%]    14591 seeds,    13427 streamlines,       61 selected
tckgen: [  0%]    30601 seeds,    28214 streamlines,      114 selected
tckgen: [  0%]    62751 seeds,    57959 streamlines,      228 selected
tckgen: [  0%]   126601 seeds,   117010 streamlines,      492 selected
tckgen: [  0%]   255521 seeds,   236196 streamlines,      958 selected
tckgen: [  1%]   511071 seeds,   472222 streamlines,     1949 selected
tckgen: [  3%]  1023001 seeds,   945045 streamlines,     3819 selected
tckgen: [  7%]  2052801 seeds,  1896821 streamlines,     7716 selected
tckgen: [ 15%]  4114891 seeds,  3802011 streamlines,    15478 selected
tckgen: [ 30%]  8226271 seeds,  7602358 streamlines,    30772 selected
tckgen: [ 61%] 16454671 seeds, 15205425 streamlines,    61696 selected
tckgen: [100%] 26686957 seeds, 24661900 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 90 102 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/temp_nsfzacitku/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 90 102 42 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/627549/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f991c9ad170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.64it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.65it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.69it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.68it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.68it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.70it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.70it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.68it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.68it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:27,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.69it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.70it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.69it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.69it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.69it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.67it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.66it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.67it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.65it/s]Processing:  67%|######6   | 36/54 [00:21<00:11,  1.62it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.62it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.63it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.63it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.63it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.63it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.63it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.64it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.64it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.65it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.65it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
done
total posterior volume:  [186.39459  413.17126  205.81204  147.25282  227.60461   83.27302
 152.75365   48.298405 218.86435  408.86877  187.23007  139.76173
 245.7392    86.7082   161.36462   54.50135 ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
42
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/662551
no data file found
-------- NUMBER OF CASES DONE ----------
42
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 104 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4904656 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 104 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       25 seeds,       22 streamlines,        1 selected
tckgen: [  0%]       26 seeds,       23 streamlines,        1 selected
tckgen: [  0%]     1711 seeds,     1615 streamlines,      149 selected
tckgen: [  0%]     4981 seeds,     4719 streamlines,      483 selected
tckgen: [  1%]    10357 seeds,     9798 streamlines,     1000 selected
tckgen: [  2%]    22201 seeds,    21001 streamlines,     2156 selected
tckgen: [  4%]    45071 seeds,    42642 streamlines,     4299 selected
tckgen: [  8%]    92721 seeds,    87797 streamlines,     8849 selected
tckgen: [ 17%]   187551 seeds,   177383 streamlines,    17976 selected
tckgen: [ 35%]   373871 seeds,   353515 streamlines,    35840 selected
tckgen: [ 71%]   746021 seeds,   705309 streamlines,    71529 selected
tckgen: [100%]  1041140 seeds,   984272 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]       20 seeds,       12 streamlines,        1 selected
tckgen: [  0%]       21 seeds,       13 streamlines,        1 selected
tckgen: [  0%]     1851 seeds,     1572 streamlines,      152 selected
tckgen: [  0%]     5381 seeds,     4589 streamlines,      430 selected
tckgen: [  1%]    11904 seeds,    10144 streamlines,     1000 selected
tckgen: [  2%]    23895 seeds,    20423 streamlines,     2000 selected
tckgen: [  4%]    50281 seeds,    42830 streamlines,     4223 selected
tckgen: [  8%]   103851 seeds,    88540 streamlines,     8738 selected
tckgen: [ 17%]   207431 seeds,   176654 streamlines,    17367 selected
tckgen: [ 34%]   414031 seeds,   352820 streamlines,    34730 selected
tckgen: [ 69%]   827861 seeds,   705356 streamlines,    69571 selected
tckgen: [100%]  1190313 seeds,  1014117 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        0 streamlines,        0 selected
tckgen: [  0%]      336 seeds,      273 streamlines,        1 selected
tckgen: [  0%]      337 seeds,      274 streamlines,        1 selected
tckgen: [  0%]     2371 seeds,     2030 streamlines,       10 selected
tckgen: [  0%]     6611 seeds,     5608 streamlines,       41 selected
tckgen: [  0%]    14901 seeds,    12626 streamlines,       87 selected
tckgen: [  0%]    31311 seeds,    26646 streamlines,      201 selected
tckgen: [  0%]    64571 seeds,    54963 streamlines,      407 selected
tckgen: [  0%]   131061 seeds,   111612 streamlines,      820 selected
tckgen: [  1%]   261441 seeds,   222681 streamlines,     1681 selected
tckgen: [  3%]   523641 seeds,   445996 streamlines,     3395 selected
tckgen: [  6%]  1050491 seeds,   895230 streamlines,     6826 selected
tckgen: [ 13%]  2096401 seeds,  1786475 streamlines,    13522 selected
tckgen: [ 27%]  4180571 seeds,  3563251 streamlines,    27065 selected
tckgen: [ 53%]  8348511 seeds,  7113291 streamlines,    53855 selected
tckgen: [100%] 15518034 seeds, 13220148 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 104 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/temp_zebaunsnur/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 104 46 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/859671/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7f9a9eb18170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:33,  1.60it/s]Processing:   4%|3         | 2/54 [00:01<00:32,  1.59it/s]Processing:   6%|5         | 3/54 [00:01<00:31,  1.60it/s]Processing:   7%|7         | 4/54 [00:02<00:31,  1.61it/s]Processing:   9%|9         | 5/54 [00:03<00:30,  1.61it/s]Processing:  11%|#1        | 6/54 [00:03<00:29,  1.62it/s]Processing:  13%|#2        | 7/54 [00:04<00:29,  1.62it/s]Processing:  15%|#4        | 8/54 [00:04<00:28,  1.62it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.63it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.63it/s]Processing:  20%|##        | 11/54 [00:06<00:26,  1.63it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.63it/s]Processing:  24%|##4       | 13/54 [00:08<00:25,  1.63it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.64it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.63it/s]Processing:  30%|##9       | 16/54 [00:09<00:23,  1.63it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.63it/s]Processing:  33%|###3      | 18/54 [00:11<00:22,  1.63it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.63it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.63it/s]Processing:  39%|###8      | 21/54 [00:12<00:20,  1.63it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.63it/s]Processing:  43%|####2     | 23/54 [00:14<00:19,  1.63it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.63it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.63it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.63it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:17<00:15,  1.63it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.63it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.63it/s]Processing:  57%|#####7    | 31/54 [00:19<00:14,  1.64it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.64it/s]Processing:  61%|######1   | 33/54 [00:20<00:12,  1.64it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.64it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.64it/s]Processing:  67%|######6   | 36/54 [00:22<00:10,  1.64it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.65it/s]Processing:  70%|#######   | 38/54 [00:23<00:09,  1.64it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.64it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:25<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:26<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.65it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:28<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:29<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:31<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.67it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.67it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.66it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.66it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.66it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.66it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.64it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.61it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.62it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.63it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.62it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.63it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.62it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.62it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.64it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.67it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.67it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.67it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.66it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.66it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.66it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.66it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.66it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.68it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.67it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.66it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.67it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.67it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.66it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.66it/s]Processing:  48%|####8     | 26/54 [00:15<00:17,  1.64it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.64it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.65it/s]Processing:  54%|#####3    | 29/54 [00:17<00:15,  1.65it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.65it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.66it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.65it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.62it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.63it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.64it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.64it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.64it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.65it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.67it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.66it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.66it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.65it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.66it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.66it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.66it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.66it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.67it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.67it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.67it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.67it/s]Processing:  46%|####6     | 25/54 [00:15<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.67it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.67it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.67it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.67it/s]Processing:  56%|#####5    | 30/54 [00:18<00:14,  1.67it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.67it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.65it/s]Processing:  65%|######4   | 35/54 [00:21<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.66it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.66it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.66it/s]Processing:  72%|#######2  | 39/54 [00:23<00:09,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:24<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:27<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.67it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:30<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.66it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]
done
total posterior volume:  [187.25816  405.7469   163.59596  126.05087  207.75873   70.07172
 126.78901   48.25323  180.97696  413.15683  161.66301  120.32921
 186.31184   73.02753  129.91946   51.138386]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
43
----------------------------------------
basepath provided is: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168
data path /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/T1w/Diffusion/data.nii.gz found
'/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/T1w/Diffusion/data.nii.gz' -> '/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/data.nii.gz'
sending incremental file list
bvals

sent 1,447 bytes  received 35 bytes  2,964.00 bytes/sec
total size is 1,343  speedup is 0.91
sending incremental file list
bvecs

sent 9,611 bytes  received 35 bytes  19,292.00 bytes/sec
total size is 9,507  speedup is 0.99
============================================================
STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/T1w/Diffusion/data.nii.gz

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/T1w/Diffusion/bvals

STARTING TRACKEGN 
DWI FILE: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/T1w/Diffusion/bvecs
Crop size:  64
Using 50threads
Perform FSL DWI preprocessing?:  False
Perform BSB CNN segmentation?:  False
============================================================
All final MRTrix volumes will be dropped in  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention
making fresh output directory...
creating temporary scratch directory  /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/
header resolution is 1.25 mm
Diffusion data contains 4 unique shell values...shell vals are: [0, 1000, 3000, 2000]
...single_shell mode is False
Resolution is out of bounds!! Regridding dwi to 1mm iso...done
extracting temporary b0...dwiextract: extracting volumes... [==================================================]
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/lowb_1mm.nii.gz"... [==================================================]
mrconvert: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/samseg_labels/mean_b0_synthseg.nii.gz"... [==================================================]
mrconvert: [WARNING] requested datatype (Int32LE) not supported - substituting with Int32BE
]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/samseg_labels/seg.mgz"... [==================================================]
Using general model from January 2023 (version 2)
/usr/local/freesurfer/7.4.1/models/synthsr_v20_230130.h5
using 50 threads
predicting 1/1
Prediction without flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step
Prediction with flipping
1/1 [==============================] - ETA: 0s1/1 [==============================] - 2s 2s/step

prediction  saved in: /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/mean_b0_synthsr.nii.gz

If you use this tool in a publication, please cite:


Joint super-resolution and synthesis of 1 mm isotropic MP-RAGE volumes from clinical 
MRI exams with scans of different orientation, resolution and contrast
JE Iglesias, B Billot, Y Balbastre, A Tabari, J Conklin, RG Gonzalez, DC Alexander,
P Golland, BL Edlow, B Fischl, for the ADNI
NeuroImage, 118206 (2021)



SynthSR: a public AI tool to turn heterogeneous clinical brain scans into 
high-resolution T1-weighted images for 3D morphometry
JE Iglesias, B Billot, Y Balbastre, C Magdamo, S Arnold, S Das, B Edlow, D Alexander,
P Golland, B Fischl
Science Advances, 9(5), eadd3607 (2023)



If you use the low-field (Hyperfine) version, please cite also:



Quantitative Brain Morphometry of Portable Low-Field-Strength MRI Using 
Super-Resolution Machine Learning
JE Iglesias, R Schleicher, S Laguna, B Billot, P Schaefer, B McKaig, JN Goldstein, 
KN Sheth, MS Rosen, WT Kimberly
Radiology, 220522 (2022)



mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/mean_b0_synthsr.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/T1.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/mean_b0_synthsr.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/T1.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/T1.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/T1.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/T1.mgz...
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/norm.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/norm.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/mean_b0.nii.gz -odt float 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/norm.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
reading template info from volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/mean_b0.nii.gz...
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/fs_subj_dir/mri/norm.mgz...
RuntimeWarning: Mean of empty slice.
RuntimeWarning: invalid value encountered in divide
mri_convert /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/brainstem_subfields/brainstemSsLabels.FSvoxelSpace.mgz -rl /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/mean_b0.nii.gz-rt nearest -odt float 

mri_convert: extra arguments ("nearest" and following)

type mri_convert -u for usage

done
extracting subcortical samseg and subfield labels...done
cropping invariant volumes to comply with unet dimensions... mri_convert --crop 91 98 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/fa_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/fa_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/fa_1mm.nii.gz...
NaN found at voxel (0, 0, 0, 0)
error: No such file or directory
error: WARNING: 4794716 NaNs found in volume /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/fa_1mm.nii.gz...
 
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/fa_1mm_cropped.nii.gz...
mri_convert --crop 91 98 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/lowb_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/lowb_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/lowb_1mm.nii.gz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/lowb_1mm_cropped.nii.gz...
done
creating tractography mask from thal and brainstem labels...done
extracting brain mask...done
obtaining response functions...done
fitting ODFs with msmt_CSD...mtnormalise: [WARNING] existing output files will be overwritten
mtnormalise: performing log-domain intensity normalisation... [==================================================]
done
performing intersection of dilated amyg and DC SAMSEG labels...tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       35 seeds,       33 streamlines,        1 selected
tckgen: [  0%]       36 seeds,       33 streamlines,        1 selected
tckgen: [  0%]     1911 seeds,     1789 streamlines,      269 selected
tckgen: [  0%]     5521 seeds,     5167 streamlines,      741 selected
tckgen: [  1%]    11001 seeds,    10334 streamlines,     1483 selected
tckgen: [  3%]    22361 seeds,    20969 streamlines,     3000 selected
tckgen: [  6%]    46611 seeds,    43686 streamlines,     6239 selected
tckgen: [ 12%]    95991 seeds,    90093 streamlines,    12886 selected
tckgen: [ 26%]   194399 seeds,   182451 streamlines,    26000 selected
tckgen: [ 52%]   389322 seeds,   365270 streamlines,    52000 selected
tckgen: [100%]   747063 seeds,   701052 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]       98 seeds,       77 streamlines,        1 selected
tckgen: [  0%]       99 seeds,       77 streamlines,        1 selected
tckgen: [  0%]     1751 seeds,     1519 streamlines,      247 selected
tckgen: [  0%]     4921 seeds,     4262 streamlines,      770 selected
tckgen: [  1%]    10571 seeds,     9036 streamlines,     1652 selected
tckgen: [  3%]    21271 seeds,    18119 streamlines,     3388 selected
tckgen: [  7%]    43221 seeds,    36798 streamlines,     7000 selected
tckgen: [ 14%]    87261 seeds,    74293 streamlines,    14115 selected
tckgen: [ 28%]   176601 seeds,   150316 streamlines,    28793 selected
tckgen: [ 57%]   354901 seeds,   302505 streamlines,    57662 selected
tckgen: [100%]   615270 seeds,   524565 streamlines,   100000 selected
tckgen: [WARNING] existing output files will be overwritten
tckgen: uncompressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/tractography_mask.nii.gz"... [==================================================]
tckgen: [  0%]        1 seeds,        1 streamlines,        0 selected
tckgen: [  0%]      150 seeds,      126 streamlines,        1 selected
tckgen: [  0%]      151 seeds,      127 streamlines,        1 selected
tckgen: [  0%]     2701 seeds,     2301 streamlines,       25 selected
tckgen: [  0%]     7851 seeds,     6652 streamlines,       62 selected
tckgen: [  0%]    17811 seeds,    15186 streamlines,      133 selected
tckgen: [  0%]    38141 seeds,    32565 streamlines,      274 selected
tckgen: [  0%]    78801 seeds,    67172 streamlines,      580 selected
tckgen: [  1%]   158371 seeds,   134973 streamlines,     1175 selected
tckgen: [  2%]   319961 seeds,   272798 streamlines,     2337 selected
tckgen: [  4%]   642951 seeds,   548107 streamlines,     4472 selected
tckgen: [  8%]  1293701 seeds,  1103184 streamlines,     8973 selected
tckgen: [ 17%]  2596191 seeds,  2213614 streamlines,    17923 selected
tckgen: [ 36%]  5207497 seeds,  4439165 streamlines,    36000 selected
tckgen: [ 71%] 10434861 seeds,  8895012 streamlines,    71649 selected
tckgen: [100%] 14564648 seeds, 12415597 streamlines,   100000 selected
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
tckmap: [WARNING] existing output files will be overwritten
tckmap: mapping tracks to image... [==================================================]
morphing by 3 voxels
done
starting tracking on thal.mif
starting tracking on DC.mif
starting tracking on CB.mif
converting Mrtrix format .tck track files into Trackvis .tck format... 
done
linearly matching tract histograms...mrgrid: [WARNING] existing output files will be overwritten
mrgrid: reslicing "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/tracts_concatenated.mif"... [==================================================]
mri_convert --crop 91 98 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/thal_brainstem_union.mgz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/thal_brainstem_union_cropped.mgz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/thal_brainstem_union.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/temp_lvheukhroe/thal_brainstem_union_cropped.mgz...
mrconvert: [WARNING] existing output files will be overwritten
mrconvert: copying from "/autofs/sp...tracts_concatenated_1mm.mif" to "/autofs/sp...cts_concatenated_1mm.nii.gz"... [==================================================]
mrconvert: compressing image "/autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz"... [==================================================]
mri_convert --crop 91 98 43 --cropsize 64 64 64 /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz 
reading from /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/tracts_concatenated_1mm.nii.gz...
TR=nan, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (0, 1, 0)
k_ras = (0, 0, 1)
writing to /autofs/space/nicc_003/users/olchanyi/data/HCP_retest_orig/877168/bsb_outputs_attention/tracts_concatenated_1mm_cropped.nii.gz...
done
rescaling and normalizing all volumes... done
deleting scratch directory... done
finished case mrtrix and fsl preprocessing 


Starting UNet WM predictions... Using TensorFlow backend.
WARNING:tensorflow:AutoGraph could not transform <function Model.make_predict_function.<locals>.predict_function at 0x7fdcdad8d170> and will run it as-is.
Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.
Cause: 'arguments' object has no attribute 'posonlyargs'
To silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert
running rsUNET...
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.69it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.65it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.66it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.66it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.66it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.67it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.67it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.69it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.69it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.69it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.69it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.69it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.69it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.69it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.70it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.69it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.69it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.69it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.69it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.70it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.69it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.69it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.68it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.66it/s]Processing:   4%|3         | 2/54 [00:01<00:31,  1.67it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.67it/s]Processing:   7%|7         | 4/54 [00:02<00:30,  1.66it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.67it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.69it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.69it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.69it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:21,  1.70it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.70it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.70it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.70it/s]Processing:  41%|####      | 22/54 [00:13<00:18,  1.70it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.69it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.67it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.67it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.66it/s]Processing:  63%|######2   | 34/54 [00:20<00:12,  1.66it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.67it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.67it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.66it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.63it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.70it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.69it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.69it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.68it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.68it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.68it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.69it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.67it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.68it/s]Processing:  22%|##2       | 12/54 [00:07<00:24,  1.69it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.69it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.68it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.69it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.68it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.69it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.69it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.69it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.69it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.69it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.69it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:21<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.69it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.67it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.67it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.67it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.65it/s]Processing:  87%|########7 | 47/54 [00:27<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.65it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.65it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.65it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.66it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.69it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.69it/s]Processing:   9%|9         | 5/54 [00:02<00:29,  1.68it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.69it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.68it/s]Processing:  17%|#6        | 9/54 [00:05<00:26,  1.68it/s]Processing:  19%|#8        | 10/54 [00:05<00:26,  1.68it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.69it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.68it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.68it/s]Processing:  26%|##5       | 14/54 [00:08<00:23,  1.68it/s]Processing:  28%|##7       | 15/54 [00:08<00:23,  1.68it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.69it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.68it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.68it/s]Processing:  35%|###5      | 19/54 [00:11<00:20,  1.68it/s]Processing:  37%|###7      | 20/54 [00:11<00:20,  1.68it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.69it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.68it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.68it/s]Processing:  44%|####4     | 24/54 [00:14<00:17,  1.68it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.68it/s]Processing:  50%|#####     | 27/54 [00:16<00:16,  1.68it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.68it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.68it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.69it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.69it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.68it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.68it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.68it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.68it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.67it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.68it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.68it/s]Processing:  78%|#######7  | 42/54 [00:24<00:07,  1.68it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.68it/s]Processing:  81%|########1 | 44/54 [00:26<00:05,  1.68it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.68it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.68it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.65it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.66it/s]Processing:  91%|######### | 49/54 [00:29<00:03,  1.66it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:30<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.68it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.68it/s]
Processing:   0%|          | 0/54 [00:00<?, ?it/s]Processing:   2%|1         | 1/54 [00:00<00:31,  1.68it/s]Processing:   4%|3         | 2/54 [00:01<00:30,  1.68it/s]Processing:   6%|5         | 3/54 [00:01<00:30,  1.68it/s]Processing:   7%|7         | 4/54 [00:02<00:29,  1.67it/s]Processing:   9%|9         | 5/54 [00:03<00:29,  1.66it/s]Processing:  11%|#1        | 6/54 [00:03<00:28,  1.66it/s]Processing:  13%|#2        | 7/54 [00:04<00:28,  1.67it/s]Processing:  15%|#4        | 8/54 [00:04<00:27,  1.67it/s]Processing:  17%|#6        | 9/54 [00:05<00:27,  1.67it/s]Processing:  19%|#8        | 10/54 [00:06<00:26,  1.66it/s]Processing:  20%|##        | 11/54 [00:06<00:25,  1.66it/s]Processing:  22%|##2       | 12/54 [00:07<00:25,  1.67it/s]Processing:  24%|##4       | 13/54 [00:07<00:24,  1.67it/s]Processing:  26%|##5       | 14/54 [00:08<00:24,  1.67it/s]Processing:  28%|##7       | 15/54 [00:09<00:23,  1.66it/s]Processing:  30%|##9       | 16/54 [00:09<00:22,  1.66it/s]Processing:  31%|###1      | 17/54 [00:10<00:22,  1.67it/s]Processing:  33%|###3      | 18/54 [00:10<00:21,  1.67it/s]Processing:  35%|###5      | 19/54 [00:11<00:21,  1.66it/s]Processing:  37%|###7      | 20/54 [00:12<00:20,  1.66it/s]Processing:  39%|###8      | 21/54 [00:12<00:19,  1.66it/s]Processing:  41%|####      | 22/54 [00:13<00:19,  1.66it/s]Processing:  43%|####2     | 23/54 [00:13<00:18,  1.66it/s]Processing:  44%|####4     | 24/54 [00:14<00:18,  1.67it/s]Processing:  46%|####6     | 25/54 [00:14<00:17,  1.68it/s]Processing:  48%|####8     | 26/54 [00:15<00:16,  1.69it/s]Processing:  50%|#####     | 27/54 [00:16<00:15,  1.69it/s]Processing:  52%|#####1    | 28/54 [00:16<00:15,  1.69it/s]Processing:  54%|#####3    | 29/54 [00:17<00:14,  1.69it/s]Processing:  56%|#####5    | 30/54 [00:17<00:14,  1.68it/s]Processing:  57%|#####7    | 31/54 [00:18<00:13,  1.68it/s]Processing:  59%|#####9    | 32/54 [00:19<00:13,  1.68it/s]Processing:  61%|######1   | 33/54 [00:19<00:12,  1.68it/s]Processing:  63%|######2   | 34/54 [00:20<00:11,  1.68it/s]Processing:  65%|######4   | 35/54 [00:20<00:11,  1.66it/s]Processing:  67%|######6   | 36/54 [00:21<00:10,  1.67it/s]Processing:  69%|######8   | 37/54 [00:22<00:10,  1.67it/s]Processing:  70%|#######   | 38/54 [00:22<00:09,  1.67it/s]Processing:  72%|#######2  | 39/54 [00:23<00:08,  1.68it/s]Processing:  74%|#######4  | 40/54 [00:23<00:08,  1.67it/s]Processing:  76%|#######5  | 41/54 [00:24<00:07,  1.67it/s]Processing:  78%|#######7  | 42/54 [00:25<00:07,  1.67it/s]Processing:  80%|#######9  | 43/54 [00:25<00:06,  1.66it/s]Processing:  81%|########1 | 44/54 [00:26<00:06,  1.66it/s]Processing:  83%|########3 | 45/54 [00:26<00:05,  1.66it/s]Processing:  85%|########5 | 46/54 [00:27<00:04,  1.66it/s]Processing:  87%|########7 | 47/54 [00:28<00:04,  1.66it/s]Processing:  89%|########8 | 48/54 [00:28<00:03,  1.67it/s]Processing:  91%|######### | 49/54 [00:29<00:02,  1.67it/s]Processing:  93%|#########2| 50/54 [00:29<00:02,  1.66it/s]Processing:  94%|#########4| 51/54 [00:30<00:01,  1.67it/s]Processing:  96%|#########6| 52/54 [00:31<00:01,  1.67it/s]Processing:  98%|#########8| 53/54 [00:31<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]Processing: 100%|##########| 54/54 [00:32<00:00,  1.67it/s]
done
total posterior volume:  [187.53651  449.64584  126.661385 119.91205  208.47784   92.15085
 145.65059   51.571583 204.70346  407.1023   141.61784  133.83684
 244.78069   82.72843  148.71303   56.8782  ]
 =========== running CRF cleanup =========== 
ierations:  5
unary potential weight:  1.0
entropy potential weight:  0.01
sigma_alpha:  2.0
sigma beta:  5.0
pairwise potential radius:  1
use_grad:  False
---- iteration 0 ----
---- iteration 1 ----
---- iteration 2 ----
---- iteration 3 ----
---- iteration 4 ----
finished!
-------- NUMBER OF CASES DONE ----------
44
----------------------------------------
DONE WITH EVERYTHING...
NUMBER OF ERRORS...1
